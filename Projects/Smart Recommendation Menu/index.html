<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D æ™ºèƒ½è†³é£Ÿç®¡å®¶ - ç«‹ä½“çè—ç‰ˆ</title>
    <!-- å¼•å…¥ç²¾é€‰å­—ä½“ -->
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Fredoka:wght@500&family=Noto+Serif+SC:wght@500;700&family=Orbitron:wght@600&family=Lato:wght@400;700&display=swap" rel="stylesheet">

    <style>
        /* =========================================
           1. å˜é‡ç³»ç»Ÿä¸çš®è‚¤å®šä¹‰
           ========================================= */
        :root {
            /* ç‰©ç†å°ºå¯¸å˜é‡ */
            --book-w: 420px;
            --book-h: 600px;
            --thickness: 60px; /* å¢åŠ åšåº¦ä»¥å¢å¼ºç«‹ä½“æ„Ÿ */
            --dur: 1.2s;       /* ç¿»é¡µåŠ¨ç”»æ—¶é•¿ */

            /* é»˜è®¤å ä½ */
            --bg-body: #111;
        }

        /* --- çš®è‚¤ A: å¤å¤çè— (Vintage) --- */
        body.skin-vintage {
            --bg-body: #1a1a1a;
            --bg-img: radial-gradient(circle at 50% 50%, #3e2723 0%, #000 100%);
            --cover-bg: #4e342e;
            --cover-tex: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.2'/%3E%3C/svg%3E");
            --page-bg: #f3e5d0;
            --page-grad: linear-gradient(to right, rgba(0,0,0,0.1), transparent 10%);
            --text-main: #3e2723;
            --accent: #c5a059;
            --font-h: 'Noto Serif SC', serif;
            --font-p: 'Lato', serif;
            --radius: 4px;
            --spine-grad: linear-gradient(90deg, #3e2723, #5d4037, #3e2723);
            --shadow-opacity: 0.6;
        }

        /* --- çš®è‚¤ B: æ¸©é¦¨æ‰‹è´¦ (Cute) --- */
        body.skin-cute {
            --bg-body: #fff0f5;
            --bg-img: radial-gradient(#f48fb1 15%, transparent 16%), radial-gradient(#f48fb1 15%, transparent 16%);
            --bg-size: 50px 50px;
            --bg-pos: 0 0, 25px 25px;
            --cover-bg: #ffccbc;
            --cover-tex: none;
            --page-bg: #fffbf0;
            --page-grad: linear-gradient(to right, rgba(255,180,180,0.2), transparent 10%);
            --text-main: #5d4037;
            --accent: #ff7043;
            --font-h: 'Fredoka', cursive;
            --font-p: 'Lato', sans-serif;
            --radius: 30px;
            --spine-grad: linear-gradient(90deg, #ffab91, #ffccbc, #ffab91);
            --shadow-opacity: 0.3;
        }

        /* --- çš®è‚¤ C: èµ›åšç§‘å¹» (Sci-Fi) --- */
        body.skin-scifi {
            --bg-body: #050505;
            --bg-img:
                linear-gradient(rgba(0, 255, 255, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 255, 0.1) 1px, transparent 1px);
            --bg-size: 60px 60px;
            --cover-bg: #0a0e17;
            --cover-tex: none;
            --page-bg: rgba(10, 20, 30, 0.95);
            --page-grad: linear-gradient(to right, rgba(0,255,255,0.2), transparent 15%);
            --text-main: #00e5ff;
            --accent: #f50057;
            --font-h: 'Orbitron', sans-serif;
            --font-p: 'Lato', sans-serif;
            --radius: 2px;
            --spine-grad: linear-gradient(90deg, #000, #00e5ff, #000);
            --shadow-opacity: 0.9;
            border: 1px solid #00e5ff;
        }

        /* =========================================
           2. åŸºç¡€å¸ƒå±€
           ========================================= */
        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; user-select: none; }

        body {
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: var(--bg-body);
            background-image: var(--bg-img);
            background-size: var(--bg-size, auto);
            background-position: var(--bg-pos, 0 0);
            font-family: var(--font-p);
            overflow: hidden;
            perspective: 2500px; /* å¼ºé€è§† */
            transition: background 0.5s;
        }

        /* çš®è‚¤åˆ‡æ¢æ  */
        .skin-bar {
            position: fixed; top: 20px; z-index: 5000;
            background: rgba(255,255,255,0.1); backdrop-filter: blur(8px);
            padding: 10px 20px; border-radius: 40px;
            display: flex; gap: 15px; border: 1px solid rgba(255,255,255,0.2);
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
        .skin-btn {
            width: 36px; height: 36px; border-radius: 50%; cursor: pointer;
            border: 2px solid rgba(255,255,255,0.5); transition: 0.3s;
        }
        .skin-btn:hover, .skin-btn.active { transform: scale(1.15); border-color: #fff; box-shadow: 0 0 15px #fff; }

        /* =========================================
           3. 3D ä¹¦ç±æ ¸å¿ƒç»“æ„
           ========================================= */
        .scene {
            width: var(--book-w);
            height: var(--book-h);
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.8s cubic-bezier(0.25, 1, 0.5, 1);
        }

        .book {
            width: 100%; height: 100%;
            position: relative;
            transform-style: preserve-3d;
        }

        /* åº•éƒ¨åŠ¨æ€é˜´å½± (Shadow Floor) */
        .shadow-floor {
            position: absolute; top: 100%; left: 0;
            width: 100%; height: 40px;
            background: radial-gradient(ellipse at center, rgba(0,0,0,var(--shadow-opacity)) 0%, transparent 70%);
            transform: rotateX(90deg) translateZ(-20px) scale(0.8);
            opacity: 0.6;
            transition: all 0.8s;
            z-index: -1;
            pointer-events: none;
        }

        /* --- ç‰©ç†åšåº¦éƒ¨ä»¶ (Fixed Back Layer) --- */

        /* å°åº•å®¹å™¨ - æ‰¿è½½ä¹¦è„Šã€ä¾§é¡µå’Œä¹¦ç­¾ */
        .back-structure {
            position: absolute; top: 0; left: 0;
            width: 100%; height: 100%;
            transform: translateZ(calc(var(--thickness) * -1)); /* å‘åæ¨ä¸€ä¸ªåšåº¦ */
            transform-style: preserve-3d;
            z-index: -1;
        }

        /* å°åº•èƒŒé¢ */
        .back-cover-skin {
            position: absolute; top: 0; left: 0;
            width: 100%; height: 100%;
            background: var(--cover-bg);
            background-image: var(--cover-tex);
            border-radius: 0 var(--radius) var(--radius) 0;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
        }

        /* ä¹¦è„Š (Spine) */
        .spine {
            position: absolute; top: 0; left: 0;
            width: var(--thickness); height: 100%;
            background: var(--spine-grad);
            transform: rotateY(-90deg) translateX(calc(var(--thickness) / -2));
            transform-origin: left;
            border-radius: 2px 0 0 2px;
        }

        /* ä¾§é¢çº¸å¼ çº¹ç† (Side Pages) */
        .side-pages {
            position: absolute; top: 5px; right: 2px;
            width: calc(var(--thickness) - 6px); height: calc(100% - 10px);
            background: repeating-linear-gradient(90deg, #fff 0px, #e0e0e0 1px, #fff 2px);
            transform: rotateY(90deg);
            transform-origin: right;
            box-shadow: inset 0 0 15px rgba(0,0,0,0.1);
        }

        /* ä¹¦ç­¾å®¹å™¨ - å…³é”®ä¿®å¤ï¼šä½äºå°åº•å±‚ï¼Œå‘å³åç§» */
        .bookmarks-layer {
            position: absolute;
            top: 40px;
            right: -32px; /* ä¼¸å‡ºä¹¦æœ¬è¾¹ç¼˜ */
            width: 30px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            transform-style: preserve-3d;
            z-index: -5; /* ç¡®ä¿ä¸é®æŒ¡æ­£é¢é¡µé¢ */
        }

        .bookmark {
            width: 65px; height: 35px;
            background: var(--accent); color: #fff;
            display: flex; align-items: center; padding-left: 12px;
            font-size: 12px; font-weight: bold;
            border-radius: 0 5px 5px 0;
            cursor: pointer;
            box-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            /* ä¿®æ­£æ–‡å­—æ–¹å‘ */
            writing-mode: horizontal-tb;
            position: relative;
            overflow: hidden;
        }
        .bookmark::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }
        .bookmark:hover::before {
            left: 100%;
        }
        .bookmark:hover {
            transform: translateX(8px) scale(1.05);
            box-shadow: 4px 4px 8px rgba(0,0,0,0.4);
        }
        .bookmark.active {
            background: rgba(255,255,255,0.9);
            color: var(--accent);
            font-weight: bold;
            box-shadow: 0 0 15px var(--accent);
        }
        body.skin-scifi .bookmark { color: #000; box-shadow: 0 0 8px var(--accent); }
        body.skin-scifi .bookmark.active { background: var(--accent); color: #000; }

        /* --- é¡µé¢ç³»ç»Ÿ (Pages) --- */
        .page {
            width: 100%; height: 100%;
            position: absolute; top: 0; left: 0;
            transform-origin: left center;
            transform-style: preserve-3d;
            transition: transform var(--dur) cubic-bezier(0.645, 0.045, 0.355, 1);
            border-radius: 0 var(--radius) var(--radius) 0;
        }

        .face {
            position: absolute; top: 0; left: 0;
            width: 100%; height: 100%;
            background-color: var(--page-bg);
            backface-visibility: hidden;
            overflow: hidden;
            border-radius: 0 var(--radius) var(--radius) 0;
            padding: 35px;
            /* ç‰©ç†å…‰å½±ï¼šä¸­ç¼é˜´å½± */
            box-shadow: inset 10px 0 25px rgba(0,0,0,0.08);
        }

        /* æ­£é¢ */
        .front {
            z-index: 2;
            background-image: var(--page-grad);
        }

        /* èƒŒé¢ */
        .back {
            z-index: 1;
            transform: rotateY(180deg);
            /* èƒŒé¢å…‰å½±åå‘ */
            background-image: linear-gradient(to left, rgba(0,0,0,0.1), transparent 10%);
        }

        /* ç¿»é¡µçŠ¶æ€ */
        .page.flipped { transform: rotateY(-180deg); }

        /* å†…å®¹æ»šåŠ¨åŒºåŸŸ */
        .content-scroll {
            height: 100%; overflow-y: auto; overflow-x: hidden;
            display: flex; flex-direction: column;
        }
        .content-scroll::-webkit-scrollbar { width: 4px; }
        .content-scroll::-webkit-scrollbar-thumb { background: var(--accent); border-radius: 2px; }

        /* =========================================
           4. ç»„ä»¶æ ·å¼
           ========================================= */
        h1, h2, h3 { font-family: var(--font-h); color: var(--text-main); margin-bottom: 20px; text-align: center; }
        h1 { font-size: 3rem; text-shadow: 2px 2px 0 rgba(0,0,0,0.1); }
        h2 { border-bottom: 2px solid var(--accent); padding-bottom: 10px; margin-top: 0; }
        p, li { color: var(--text-main); line-height: 1.7; font-size: 0.95rem; margin-bottom: 10px; }

        /* æŒ‰é’® */
        .btn {
            background: var(--accent); color: #fff;
            border: none; padding: 12px; width: 100%;
            border-radius: var(--radius); cursor: pointer;
            font-family: var(--font-p); font-weight: bold; font-size: 1rem;
            margin-top: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.15);
            transition: 0.2s;
        }
        .btn:hover { transform: translateY(-2px); filter: brightness(1.1); }
        body.skin-scifi .btn { color: #000; box-shadow: 0 0 10px var(--accent); }

        /* è¾“å…¥æ¡† */
        input, select {
            width: 100%; padding: 10px; margin-bottom: 10px;
            background: rgba(0,0,0,0.05); border: 1px solid var(--accent);
            border-radius: 8px; color: var(--text-main); font-family: inherit;
        }

        /* æ ‡ç­¾ */
        .tags { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 10px; }
        .tag {
            background: var(--accent); color: #fff;
            padding: 4px 12px; border-radius: 12px; font-size: 0.8rem;
            cursor: pointer;
        }
        body.skin-scifi .tag { color: #000; }

        /* åˆ—è¡¨ */
        .list { list-style: none; padding: 0; }
        .item {
            display: flex; justify-content: space-between; align-items: center;
            padding: 10px 0; border-bottom: 1px dashed var(--accent);
        }

        /* åº•éƒ¨å¯¼èˆª */
        .nav-dock {
            position: fixed; bottom: 30px; display: flex; gap: 40px; z-index: 2000;
        }
        .nav-btn {
            width: 55px; height: 55px; border-radius: 50%;
            background: var(--accent); color: #fff;
            display: flex; justify-content: center; align-items: center;
            font-size: 26px; cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3); transition: 0.3s;
            border: 2px solid rgba(255,255,255,0.4);
        }
        .nav-btn:hover { transform: scale(1.15); }
        body.skin-scifi .nav-btn { color: #000; }

        /* Toast */
        #toast {
            position: fixed; top: 90px; left: 50%; transform: translateX(-50%);
            background: var(--accent); color: #fff;
            padding: 12px 25px; border-radius: 30px;
            font-weight: bold; opacity: 0; transition: 0.3s; pointer-events: none;
            z-index: 9999; box-shadow: 0 5px 20px rgba(0,0,0,0.3);
        }
        body.skin-scifi #toast { color: #000; }

        /* è£…é¥° */
        .corner {
            position: absolute; width: 30px; height: 30px;
            border: 2px solid var(--accent); pointer-events: none; opacity: 0.5;
            transition: opacity 0.3s;
        }
        .corner:hover { opacity: 0.8; }
        .tl { top: 20px; left: 20px; border-right: none; border-bottom: none; }
        .br { bottom: 20px; right: 20px; border-left: none; border-top: none; }

        /* åŠ è½½åŠ¨ç”» */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 0.8s linear infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* è„‰å†²åŠ¨ç”» */
        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.05); }
        }
        .pulse { animation: pulse 2s ease-in-out infinite; }

        /* æ·¡å…¥åŠ¨ç”» */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in { animation: fadeIn 0.5s ease-out; }

        /* é¡µé¢ç¼–å· */
        .page-number {
            position: absolute;
            bottom: 15px;
            right: 20px;
            font-size: 0.75rem;
            color: var(--text-main);
            opacity: 0.4;
            font-weight: bold;
        }

        /* è¥å…»æ ‡ç­¾ */
        .nutrition-badge {
            display: inline-block;
            padding: 3px 8px;
            margin: 2px;
            background: rgba(0,0,0,0.05);
            border-radius: 10px;
            font-size: 0.75rem;
            border: 1px solid var(--accent);
        }

        /* æ—¥æœŸé€‰æ‹©å™¨ */
        .date-picker {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        .date-btn {
            padding: 6px 12px;
            background: rgba(0,0,0,0.05);
            border: 1px solid var(--accent);
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.2s;
        }
        .date-btn:hover { background: var(--accent); color: #fff; }
        .date-btn.active { background: var(--accent); color: #fff; }

        /* è¿›åº¦æ¡ */
        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(0,0,0,0.1);
            border-radius: 3px;
            overflow: hidden;
            margin: 10px 0;
        }
        .progress-fill {
            height: 100%;
            background: var(--accent);
            transition: width 0.3s ease;
            border-radius: 3px;
        }

        /* å¡ç‰‡æ ·å¼ */
        .card {
            background: rgba(255,255,255,0.5);
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border: 1px solid rgba(0,0,0,0.1);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        /* ç©ºçŠ¶æ€ */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            opacity: 0.5;
        }
        .empty-state::before {
            content: "ğŸ“­";
            font-size: 3rem;
            display: block;
            margin-bottom: 10px;
        }

        /* é€‚é… */
        @media (max-width: 900px) {
            :root { --book-w: 340px; --book-h: 520px; }
            .face { padding: 25px; }
            h1 { font-size: 2rem; }
            h2 { font-size: 1.3rem; }
            .nav-dock { gap: 20px; }
            .nav-btn { width: 45px; height: 45px; font-size: 20px; }
            .skin-bar { top: 10px; padding: 8px 15px; gap: 10px; }
            .skin-btn { width: 30px; height: 30px; }
        }

        /* æ•™å­¦æ¨¡æ€æ¡† */
        .recipe-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            backdrop-filter: blur(5px);
            z-index: 10000;
            display: none;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.3s ease-out;
        }
        .recipe-modal.active {
            display: flex;
        }
        .recipe-content {
            background: var(--page-bg);
            color: var(--text-main);
            width: 90%;
            max-width: 600px;
            max-height: 85vh;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            overflow-y: auto;
            position: relative;
            animation: slideUp 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: 2px solid var(--accent);
        }
        .recipe-content::-webkit-scrollbar {
            width: 8px;
        }
        .recipe-content::-webkit-scrollbar-thumb {
            background: var(--accent);
            border-radius: 4px;
        }
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        .recipe-close {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: var(--accent);
            color: #fff;
            border: none;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }
        .recipe-close:hover {
            transform: rotate(90deg) scale(1.1);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        .recipe-header {
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--accent);
        }
        .recipe-title {
            font-size: 2rem;
            color: var(--text-main);
            margin-bottom: 10px;
            font-family: var(--font-h);
        }
        .recipe-meta {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            font-size: 0.9rem;
            opacity: 0.8;
        }
        .recipe-section {
            margin: 25px 0;
        }
        .recipe-section h3 {
            color: var(--accent);
            font-size: 1.3rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .ingredients-list {
            list-style: none;
            padding: 0;
        }
        .ingredients-list li {
            padding: 10px 15px;
            margin: 8px 0;
            background: rgba(0,0,0,0.03);
            border-radius: 8px;
            border-left: 3px solid var(--accent);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .steps-list {
            list-style: none;
            padding: 0;
            counter-reset: step-counter;
        }
        .steps-list li {
            counter-increment: step-counter;
            padding: 15px;
            margin: 12px 0;
            background: rgba(0,0,0,0.03);
            border-radius: 8px;
            position: relative;
            padding-left: 50px;
        }
        .steps-list li::before {
            content: counter(step-counter);
            position: absolute;
            left: 15px;
            top: 15px;
            width: 28px;
            height: 28px;
            background: var(--accent);
            color: #fff;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
        }
        .recipe-tips {
            background: rgba(255,235,59,0.2);
            border-left: 4px solid #ffc107;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
        }
        .recipe-tips strong {
            color: #f57c00;
        }
        .view-recipe-btn {
            background: rgba(0,0,0,0.05);
            border: 1px solid var(--accent);
            color: var(--accent);
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.2s;
            margin-left: 8px;
        }
        .view-recipe-btn:hover {
            background: var(--accent);
            color: #fff;
        }

        /* æ‰“å°æ ·å¼ */
        @media print {
            body { background: white; }
            .skin-bar, .nav-dock, .bookmarks-layer { display: none; }
            .recipe-modal { display: none !important; }
        }
    </style>
</head>
<body class="skin-vintage">

    <!-- çš®è‚¤åˆ‡æ¢ -->
    <div class="skin-bar">
        <div class="skin-btn active" style="background:#3e2723" onclick="setSkin('skin-vintage', this)"></div>
        <div class="skin-btn" style="background:#ffab91" onclick="setSkin('skin-cute', this)"></div>
        <div class="skin-btn" style="background:#000; border-color:#00e5ff" onclick="setSkin('skin-scifi', this)"></div>
    </div>

    <div id="toast">æç¤ºä¿¡æ¯</div>

    <div class="scene">
        <div class="book" id="book">

            <!-- ç‰©ç†ç»“æ„å±‚ï¼šå°åº•ã€ä¹¦è„Šã€ä¾§é¡µã€ä¹¦ç­¾ -->
            <div class="back-structure">
                <div class="back-cover-skin"></div>
                <div class="spine"></div>
                <div class="side-pages"></div>

                <!-- ä¹¦ç­¾ç°åœ¨ä½äºå°åº•å±‚ï¼Œå‘å³åç§»ï¼Œç¡®ä¿ä¸è¢«é®æŒ¡ -->
                <div class="bookmarks-layer">
                    <div class="bookmark" onclick="jumpTo(1)" data-page="1" title="æ™ºèƒ½æ¨è">æ¨è</div>
                    <div class="bookmark" onclick="jumpTo(2)" data-page="2" title="é£Ÿæç®¡ç†">é£Ÿæ</div>
                    <div class="bookmark" onclick="jumpTo(3)" data-page="3" title="è†³é£Ÿè®¡åˆ’">è®¡åˆ’</div>
                    <div class="bookmark" onclick="jumpTo(4)" data-page="4" title="é‡‡è´­æ¸…å•">æ¸…å•</div>
                </div>
            </div>

            <!-- Page 0: å°é¢ -->
            <div class="page" id="p0">
                <div class="face front" style="background:var(--cover-bg); background-image:var(--cover-tex); color:#fff;">
                    <div class="content-scroll" style="justify-content: center; align-items: center; overflow: hidden;">
                        <div style="border: 4px double var(--accent); padding: 50px 20px; width: 90%; text-align: center;">
                            <h1 style="color:#fff; margin:0;">MENU</h1>
                            <p style="color:var(--accent); letter-spacing: 6px; margin-top: 10px;">PLANNER</p>
                            <div style="width: 60px; height: 2px; background:var(--accent); margin: 25px auto;"></div>
                            <p style="font-size: 0.9rem; opacity: 0.8;">3D è†³é£Ÿç®¡å®¶</p>
                        </div>
                    </div>
                </div>
                <div class="face back">
                    <div class="content-scroll">
                        <div class="corner tl"></div>
                        <div class="corner br"></div>
                        <div class="page-number">1/5</div>
                        <h2>ğŸ“– ä½¿ç”¨æŒ‡å—</h2>
                        <p style="text-align: center; margin-bottom: 20px; color: var(--accent); font-weight: bold;">æ¬¢è¿ä½¿ç”¨æ‚¨çš„æ™ºèƒ½èœå•ä¹¦</p>
                        <div class="card fade-in">
                            <ul style="margin: 0; line-height: 2.2; list-style: none;">
                                <li>ğŸ¥˜ <strong>æ™ºèƒ½æ¨è</strong>ï¼šAI æ ¹æ®åå¥½å®šåˆ¶èœå•</li>
                                <li>ğŸ§Š <strong>åº“å­˜ç®¡ç†</strong>ï¼šè¿½è¸ªå†°ç®±é£Ÿæï¼Œæ™ºèƒ½åŒ¹é…</li>
                                <li>ğŸ“… <strong>è†³é£Ÿæ—¥å†</strong>ï¼šè§„åˆ’æœ¬å‘¨é¥®é£Ÿè®¡åˆ’</li>
                                <li>ğŸ›’ <strong>é‡‡è´­æ¸…å•</strong>ï¼šè‡ªåŠ¨ç”Ÿæˆè¡¥è´§æ¸…å•</li>
                        </ul>
                        </div>
                        <div style="margin-top: 20px; padding: 15px; background: rgba(0,0,0,0.03); border-radius: 8px; border-left: 3px solid var(--accent);">
                            <p style="font-size: 0.85rem; margin: 0;"><strong>ğŸ’¡ æç¤ºï¼š</strong>ä½¿ç”¨é”®ç›˜ â† â†’ æ–¹å‘é”®ç¿»é¡µï¼Œç‚¹å‡»ä¹¦ç­¾å¿«é€Ÿè·³è½¬</p>
                        </div>
                        <div style="margin-top: auto; text-align: center; padding-top: 20px;">
                            <button class="btn pulse" style="width: auto; padding: 12px 50px;" onclick="flipNext()">âœ¨ å¼€å§‹ä½¿ç”¨</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Page 1: æ¨è -->
            <div class="page" id="p1">
                <div class="face front">
                    <div class="content-scroll">
                        <div class="corner tl"></div>
                        <div class="page-number">2/5</div>
                        <h2>ğŸ¥˜ æ™ºèƒ½æ¨è</h2>
                        <p style="text-align: center; margin-bottom: 15px; color: var(--accent);">ä»Šå¤©åƒä»€ä¹ˆï¼Ÿ</p>
                        <label style="display: block; margin-bottom: 8px; font-weight: bold;">é€‰æ‹©åå¥½ï¼š</label>
                        <select id="pref" style="margin-bottom: 15px;">
                            <option value="balanced">ğŸ¥— å‡è¡¡è†³é£Ÿ</option>
                            <option value="meat">ğŸ¥© è‚‰é£Ÿä¸»ä¹‰</option>
                            <option value="light">ğŸ¥¬ ä½å¡è½»é£Ÿ</option>
                            <option value="vegan">ğŸŒ± ç´ é£Ÿä¸»ä¹‰</option>
                            <option value="quick">âš¡ å¿«é€Ÿæ–™ç†</option>
                        </select>
                        <div style="margin-bottom: 10px;">
                            <label style="font-size: 0.85rem; opacity: 0.7;">ç”Ÿæˆæ•°é‡ï¼š</label>
                            <input type="range" id="menuCount" min="1" max="5" value="3" style="width: 100%; margin-top: 5px;" oninput="document.getElementById('countDisplay').textContent = this.value">
                            <div style="text-align: center; font-size: 0.8rem; color: var(--accent);"><span id="countDisplay">3</span> é“èœ</div>
                        </div>
                        <button class="btn" onclick="genMenu()" id="genBtn">
                            <span id="genBtnText">âœ¨ ç”Ÿæˆèœå•</span>
                        </button>

                        <div id="genResult" class="card fade-in" style="margin-top: 20px; text-align: center; min-height: 80px; display: flex; align-items: center; justify-content: center; opacity: 0.7;">
                            <div>ç­‰å¾…ç”Ÿæˆ...</div>
                        </div>
                    </div>
                </div>
                <div class="face back">
                    <div class="content-scroll">
                        <div class="page-number">2/5</div>
                        <h2>ğŸ“‹ èœå•è¯¦æƒ…</h2>
                        <p style="font-size: 0.9rem; opacity: 0.8; margin-bottom: 15px;">ç‚¹å‡»æŸ¥çœ‹è¥å…»ä¿¡æ¯</p>
                        <ul id="menuList" class="list">
                            <li class="item empty-state" style="justify-content: center; opacity: 0.5; border: none;">
                                <div>è¯·å…ˆåœ¨å·¦ä¾§ç”Ÿæˆèœå•</div>
                            </li>
                        </ul>
                        <div id="menuNutrition" style="margin-top: 15px; padding: 10px; background: rgba(0,0,0,0.03); border-radius: 6px; font-size: 0.85rem; display: none;">
                            <strong>æ€»è¥å…»ï¼š</strong>
                            <div style="display: flex; gap: 10px; margin-top: 5px; flex-wrap: wrap;">
                                <span class="nutrition-badge">çƒ­é‡: <span id="totalKcal">0</span> kcal</span>
                                <span class="nutrition-badge">è›‹ç™½è´¨: <span id="totalProtein">0</span>g</span>
                                <span class="nutrition-badge">ç¢³æ°´: <span id="totalCarb">0</span>g</span>
                            </div>
                        </div>
                        <div style="margin-top: auto; padding-top: 15px;">
                            <button class="btn" onclick="addToPlan()" id="addPlanBtn" disabled>ğŸ“… å…¨éƒ¨åŠ å…¥è®¡åˆ’</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Page 2: é£Ÿæ -->
            <div class="page" id="p2">
                <div class="face front">
                    <div class="content-scroll">
                        <div class="page-number">3/5</div>
                        <h2>ğŸ§Š å†°ç®±åº“å­˜</h2>
                        <p style="font-size: 0.9rem; opacity: 0.7; margin-bottom: 15px; text-align: center;">ç®¡ç†æ‚¨çš„é£Ÿæåº“å­˜</p>
                        <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                            <input type="text" id="ingInput" placeholder="ä¾‹å¦‚ï¼šé¸¡è›‹ã€ç•ªèŒ„..." onkeypress="if(event.keyCode==13) addIng()" ondblclick="quickAddCommon()" style="flex: 1;" title="åŒå‡»å¿«é€Ÿæ·»åŠ å¸¸ç”¨é£Ÿæ">
                            <button class="btn" style="width: 50px; margin-top:0; padding: 10px;" onclick="addIng()" title="æ·»åŠ é£Ÿæ">+</button>
                        </div>
                        <div style="margin-bottom: 10px;">
                            <div style="font-size: 0.85rem; opacity: 0.7; margin-bottom: 5px;">åº“å­˜æ•°é‡ï¼š<strong id="ingCount">0</strong> ç§</div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="ingProgress" style="width: 0%;"></div>
                            </div>
                        </div>
                        <div id="ingTags" class="tags" style="min-height: 40px;">
                            <!-- Tags -->
                        </div>
                        <p style="margin-top: 15px; font-size: 0.8rem; opacity: 0.6; text-align: center;">ğŸ’¡ ç‚¹å‡»æ ‡ç­¾åˆ é™¤ï¼ŒåŒå‡»å¿«é€Ÿæ·»åŠ </p>
                        <div style="margin-top: auto; padding-top: 15px;">
                            <button class="btn" onclick="matchRecipe()" id="matchBtn">ğŸ” åŒ¹é…é£Ÿè°±</button>
                            <button class="btn" onclick="clearInventory()" style="margin-top: 10px; background: rgba(255,0,0,0.1); color: var(--accent); border: 1px solid var(--accent);">ğŸ—‘ï¸ æ¸…ç©ºåº“å­˜</button>
                        </div>
                    </div>
                </div>
                <div class="face back">
                    <div class="content-scroll">
                        <div class="page-number">3/5</div>
                        <h2>ğŸ³ åŒ¹é…ç»“æœ</h2>
                        <p style="font-size: 0.9rem; opacity: 0.8; margin-bottom: 15px;">åŸºäºå½“å‰åº“å­˜æ¨èï¼š</p>
                        <div id="matchStats" style="margin-bottom: 15px; padding: 10px; background: rgba(0,0,0,0.03); border-radius: 6px; font-size: 0.85rem; display: none;">
                            <strong>åŒ¹é…åº¦ï¼š</strong><span id="matchRate">0</span>%
                        </div>
                        <ul id="matchList" class="list">
                            <li class="item empty-state" style="justify-content: center; opacity: 0.5; border: none;">
                                <div>æš‚æ— åŒ¹é…ï¼Œè¯·å…ˆæ·»åŠ é£Ÿæ</div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Page 3: è®¡åˆ’ -->
            <div class="page" id="p3">
                <div class="face front">
                    <div class="content-scroll">
                        <div class="corner tl"></div>
                        <div class="page-number">4/5</div>
                        <h2>ğŸ“… æœ¬å‘¨è®¡åˆ’</h2>
                        <div class="date-picker">
                            <span style="font-size: 0.85rem; opacity: 0.7;">é€‰æ‹©æ—¥æœŸï¼š</span>
                            <div class="date-btn active" onclick="selectDate('today', this)">ä»Šå¤©</div>
                            <div class="date-btn" onclick="selectDate('tomorrow', this)">æ˜å¤©</div>
                            <div class="date-btn" onclick="selectDate('week', this)">æœ¬å‘¨</div>
                        </div>
                        <div style="margin-bottom: 15px; padding: 10px; background: rgba(0,0,0,0.03); border-radius: 6px; font-size: 0.85rem;">
                            <div style="display: flex; justify-content: space-between;">
                                <span>è®¡åˆ’æ•°é‡ï¼š<strong id="planCount">0</strong> é“</span>
                                <span>æ€»çƒ­é‡ï¼š<strong id="calTotal" style="color: var(--accent);">0</strong> kcal</span>
                            </div>
                        </div>
                        <ul id="planList" class="list">
                            <li class="item empty-state" style="justify-content: center; opacity: 0.5; border: none;">
                                <div>æš‚æ— è®¡åˆ’ï¼Œå¿«å»æ·»åŠ å§ï¼</div>
                            </li>
                        </ul>
                        <div style="margin-top: auto; padding-top: 15px;">
                            <button class="btn" onclick="clearPlan()" style="background: rgba(255,0,0,0.1); color: var(--accent); border: 1px solid var(--accent);">ğŸ—‘ï¸ æ¸…ç©ºè®¡åˆ’</button>
                        </div>
                    </div>
                </div>
                <div class="face back">
                    <div class="content-scroll">
                        <div class="page-number">4/5</div>
                        <h2>ğŸ›’ é‡‡è´­æ¸…å•</h2>
                        <p style="font-size: 0.9rem; opacity: 0.8; margin-bottom: 15px;">å·²è‡ªåŠ¨æ‰£é™¤åº“å­˜</p>
                        <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                            <button class="btn" style="padding: 8px; font-size: 0.9rem; margin-bottom: 0; flex: 1;" onclick="genShop()">ğŸ”„ åˆ·æ–°æ¸…å•</button>
                            <button class="btn" style="padding: 8px; font-size: 0.9rem; margin-bottom: 0; flex: 1; background: rgba(0,255,0,0.1); color: var(--accent); border: 1px solid var(--accent);" onclick="checkAll()">âœ“ å…¨é€‰</button>
                        </div>
                        <div style="margin-bottom: 10px; padding: 8px; background: rgba(0,0,0,0.03); border-radius: 6px; font-size: 0.85rem;">
                            å¾…é‡‡è´­ï¼š<strong id="shopCount">0</strong> é¡¹
                        </div>
                        <ul id="shopList" class="list">
                            <li class="item empty-state" style="justify-content: center; opacity: 0.5; border: none;">
                                <div>æ— éœ€é‡‡è´­ï¼Œåº“å­˜å……è¶³ï¼</div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Page 4: å°åº• -->
            <div class="page" id="p4">
                <div class="face front">
                    <div class="content-scroll" style="justify-content: center; text-align: center;">
                        <div class="page-number" style="color: rgba(255,255,255,0.5);">5/5</div>
                        <h2 style="border:none; font-size: 2.5rem; margin-bottom: 20px;">Enjoy!</h2>
                        <p style="font-size: 1.1rem; margin-bottom: 30px; color: var(--accent);">å”¯æœ‰çˆ±ä¸ç¾é£Ÿä¸å¯è¾œè´Ÿ</p>
                        <div style="font-size: 3rem; margin: 30px 0; animation: pulse 2s ease-in-out infinite;">ğŸ¥— ğŸ¥© ğŸ¥‘</div>
                        <div class="card" style="background: rgba(255,255,255,0.1); margin: 20px; padding: 20px;">
                            <p style="font-size: 0.9rem; opacity: 0.9; margin-bottom: 10px;">ğŸ“Š ä½¿ç”¨ç»Ÿè®¡</p>
                            <div style="display: flex; justify-content: space-around; margin-top: 15px;">
                                <div>
                                    <div style="font-size: 1.5rem; font-weight: bold;" id="statRecipes">0</div>
                                    <div style="font-size: 0.75rem; opacity: 0.8;">å·²è§„åˆ’</div>
                                </div>
                                <div>
                                    <div style="font-size: 1.5rem; font-weight: bold;" id="statIngredients">0</div>
                                    <div style="font-size: 0.75rem; opacity: 0.8;">é£Ÿææ•°</div>
                                </div>
                                <div>
                                    <div style="font-size: 1.5rem; font-weight: bold;" id="statDays">0</div>
                                    <div style="font-size: 0.75rem; opacity: 0.8;">ä½¿ç”¨å¤©æ•°</div>
                                </div>
                            </div>
                        </div>
                        <button class="btn" onclick="exportData()" style="width: auto; padding: 10px 30px; margin-top: 20px;">ğŸ’¾ å¯¼å‡ºæ•°æ®</button>
                    </div>
                </div>
                <div class="face back" style="background:var(--cover-bg); background-image:var(--cover-tex); color:#fff;">
                    <div class="content-scroll" style="justify-content: center; align-items: center;">
                        <div style="opacity: 0.7; text-align: center;">
                            <p style="font-size: 1.2rem; margin-bottom: 10px;">Designed by AI</p>
                            <p style="font-size: 0.9rem; opacity: 0.8;">Ultimate Edition</p>
                            <div style="margin-top: 30px; font-size: 0.85rem; opacity: 0.6;">
                                <p>æ„Ÿè°¢ä½¿ç”¨</p>
                                <p style="margin-top: 10px;">æ„¿æ¯ä¸€é¤éƒ½å……æ»¡ç¾å¥½</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
        <!-- åº•éƒ¨åŠ¨æ€é˜´å½± -->
        <div class="shadow-floor"></div>
    </div>

    <!-- å¯¼èˆª -->
    <div class="nav-dock">
        <div class="nav-btn" onclick="flipPrev()">â®</div>
        <div class="nav-btn" onclick="flipNext()">â¯</div>
    </div>

    <!-- èœå“æ•™å­¦æ¨¡æ€æ¡† -->
    <div class="recipe-modal" id="recipeModal" onclick="if(event.target.id === 'recipeModal') closeRecipeModal()">
        <div class="recipe-content">
            <button class="recipe-close" onclick="closeRecipeModal()">Ã—</button>
            <div id="recipeDetails"></div>
        </div>
    </div>

    <script>
        /* =========================================
           1. æ ¸å¿ƒ 3D é€»è¾‘ (Z-Index åŠ¨æ€ç®—æ³•)
           ========================================= */
        let currentPage = 0;
        const totalPages = 5;
        const scene = document.querySelector('.scene');
        const book = document.getElementById('book');
        const pages = document.querySelectorAll('.page');
        const shadow = document.querySelector('.shadow-floor');
        let isFlipping = false;

        function init() {
            // åˆå§‹åŒ–å †å ï¼šå³ä¾§é¡µç å°çš„åœ¨ä¸Š
            pages.forEach((p, i) => {
                p.style.zIndex = totalPages - i;
            });
            updateView();
            // åˆå§‹åŒ–ä¹¦ç­¾çŠ¶æ€
            updateBookmarkState();
        }

        // æ ¸å¿ƒï¼šé˜²æ­¢ç©¿æ¨¡çš„å±‚çº§ç®—æ³•
        function updateZIndexes() {
            pages.forEach((page, index) => {
                if (index < currentPage) {
                    // å·¦ä¾§ (ç¿»è¿‡å»çš„)ï¼šIndex è¶Šå¤§è¶Šåœ¨ä¸Š (å¦‚ P1 ç›–ä½ P0)
                    page.style.zIndex = index + 1;
                } else if (index === currentPage) {
                    // å½“å‰æ“ä½œé¡µï¼šæœ€é«˜ä¼˜å…ˆçº§
                    page.style.zIndex = 100;
                } else {
                    // å³ä¾§ (æœªç¿»çš„)ï¼šIndex è¶Šå°è¶Šåœ¨ä¸Š (å¦‚ P2 ç›–ä½ P3)
                    page.style.zIndex = (totalPages - index) + 1;
                }
            });
        }

        function updateView() {
            // ä¹¦æœ¬æ‰“å¼€æ—¶ï¼Œæ•´ä½“å³ç§»ä»¥å±…ä¸­ï¼›åˆä¸Šæ—¶å½’ä½
            // åŒæ—¶è°ƒæ•´åº•éƒ¨é˜´å½±å¤§å°
            if (currentPage === 0 || currentPage === totalPages) {
                scene.style.transform = `translateX(0)`;
                book.style.transform = `rotateY(-10deg)`; // åˆä¸Šæ—¶å¾®å€¾æ–œ
                shadow.style.transform = `rotateX(90deg) translateZ(-20px) scale(0.8)`;
                shadow.style.opacity = '0.6';
            } else {
                if(window.innerWidth > 900) {
                    scene.style.transform = `translateX(50%)`;
                }
                book.style.transform = `rotateY(0deg)`;
                // æ‰“å¼€æ—¶é˜´å½±å˜å¤§å˜æ·¡
                shadow.style.transform = `rotateX(90deg) translateZ(-20px) scale(1.4)`;
                shadow.style.opacity = '0.3';
            }
            // æ›´æ–°ä¹¦ç­¾çŠ¶æ€
            updateBookmarkState();
        }

        function flipNext() {
            if (currentPage < totalPages && !isFlipping) {
                isFlipping = true;
                const page = document.getElementById(`p${currentPage}`);

                // 1. ææƒ
                page.style.zIndex = 100;
                // 2. åŠ¨ç”»
                page.classList.add('flipped');
                currentPage++;
                updateView();

                // 3. åŠ¨ç”»ç»“æŸåé‡ç½®å±‚çº§
                setTimeout(() => {
                    updateZIndexes();
                    isFlipping = false;
                }, 1000); // ç•¥å°äº dur ç¡®ä¿å¹³æ»‘
            }
        }

        function flipPrev() {
            if (currentPage > 0 && !isFlipping) {
                isFlipping = true;
                currentPage--;
                const page = document.getElementById(`p${currentPage}`);

                // å›ç¿»æ—¶è¯¥é¡µä¹Ÿè¦ææƒï¼Œç›–ä½å³ä¾§
                page.style.zIndex = 100;
                page.classList.remove('flipped');
                updateView();

                setTimeout(() => {
                    updateZIndexes();
                    isFlipping = false;
                }, 1000);
            }
        }

        function jumpTo(idx) {
            if(isFlipping) return;

            // æ›´æ–°ä¹¦ç­¾æ¿€æ´»çŠ¶æ€
            document.querySelectorAll('.bookmark').forEach((bm, i) => {
                if(i + 1 === idx) {
                    bm.classList.add('active');
                } else {
                    bm.classList.remove('active');
                }
            });

            // æ˜¾ç¤ºè·³è½¬æç¤º
            const bookmarkNames = ['', 'æ¨è', 'é£Ÿæ', 'è®¡åˆ’', 'æ¸…å•'];
            if(bookmarkNames[idx]) {
                showToast(`è·³è½¬åˆ°ï¼š${bookmarkNames[idx]}`, 1000);
            }

            if (idx > currentPage) {
                let steps = idx - currentPage;
                // ä¼˜åŒ–ï¼šä½¿ç”¨æ›´å¿«çš„ç¿»é¡µé€Ÿåº¦ï¼Œä½†ä¿æŒå¹³æ»‘
                for(let i=0; i<steps; i++) {
                    setTimeout(() => {
                        if(i === steps - 1) {
                            // æœ€åä¸€é¡µæ—¶æ›´æ–°ä¹¦ç­¾çŠ¶æ€
                            setTimeout(() => {
                                updateBookmarkState();
                            }, 300);
                        }
                        flipNext();
                    }, i * 200);
                }
            } else if (idx < currentPage) {
                let steps = currentPage - idx;
                for(let i=0; i<steps; i++) {
                    setTimeout(() => {
                        if(i === steps - 1) {
                            setTimeout(() => {
                                updateBookmarkState();
                            }, 300);
                        }
                        flipPrev();
                    }, i * 200);
                }
            } else {
                // å¦‚æœå·²ç»åœ¨ç›®æ ‡é¡µï¼Œæ›´æ–°ä¹¦ç­¾çŠ¶æ€
                updateBookmarkState();
            }
        }

        function updateBookmarkState() {
            document.querySelectorAll('.bookmark').forEach((bm, i) => {
                const pageNum = parseInt(bm.getAttribute('data-page'));
                if(pageNum === currentPage) {
                    bm.classList.add('active');
                } else {
                    bm.classList.remove('active');
                }
            });
        }

        init();

        /* =========================================
           2. ä¸šåŠ¡åŠŸèƒ½é€»è¾‘
           ========================================= */
        const db = [
            {
                n:"é¦™ç…ç‰›æ’", k:450, t:"meat", i:["ç‰›è‚‰","é»‘èƒ¡æ¤’","é»„æ²¹"], p:35, c:5,
                ingredients: [
                    {name: "ç‰›æ’", amount: "200g"},
                    {name: "é»‘èƒ¡æ¤’", amount: "é€‚é‡"},
                    {name: "æµ·ç›", amount: "é€‚é‡"},
                    {name: "é»„æ²¹", amount: "20g"},
                    {name: "å¤§è’œ", amount: "2ç“£"},
                    {name: "è¿·è¿­é¦™", amount: "1æ"}
                ],
                steps: [
                    "ç‰›æ’æå‰30åˆ†é’Ÿä»å†°ç®±å–å‡ºï¼Œæ¢å¤å®¤æ¸©",
                    "ç”¨å¨æˆ¿çº¸å·¾æ“¦å¹²è¡¨é¢æ°´åˆ†",
                    "ä¸¤é¢å‡åŒ€æ’’ä¸Šé»‘èƒ¡æ¤’å’Œæµ·ç›",
                    "å¹³åº•é”…å¤§ç«åŠ çƒ­ï¼Œæ”¾å…¥é»„æ²¹",
                    "æ²¹çƒ­åæ”¾å…¥ç‰›æ’ï¼Œæ¯é¢ç…2-3åˆ†é’Ÿï¼ˆæ ¹æ®åšåº¦è°ƒæ•´ï¼‰",
                    "æœ€å30ç§’åŠ å…¥å¤§è’œå’Œè¿·è¿­é¦™å¢é¦™",
                    "ç…å¥½åé™ç½®5åˆ†é’Ÿå†åˆ‡ï¼Œé”ä½è‚‰æ±"
                ],
                tips: "é€‰æ‹©åšåº¦2-3cmçš„ç‰›æ’æ•ˆæœæœ€ä½³ï¼Œç…åˆ¶æ—¶ä¸è¦é¢‘ç¹ç¿»é¢ï¼Œé™ç½®æ—¶é—´å¾ˆé‡è¦ï¼"
            },
            {
                n:"é¸¡èƒ¸è‚‰æ²™æ‹‰", k:200, t:"light", i:["é¸¡èƒ¸è‚‰","ç”Ÿèœ","ç‰ç±³","ç•ªèŒ„"], p:25, c:15,
                ingredients: [
                    {name: "é¸¡èƒ¸è‚‰", amount: "150g"},
                    {name: "ç”Ÿèœ", amount: "100g"},
                    {name: "ç‰ç±³ç²’", amount: "50g"},
                    {name: "å°ç•ªèŒ„", amount: "5ä¸ª"},
                    {name: "æ©„æ¦„æ²¹", amount: "1å‹º"},
                    {name: "æŸ æª¬æ±", amount: "1å‹º"},
                    {name: "ç›", amount: "å°‘è®¸"}
                ],
                steps: [
                    "é¸¡èƒ¸è‚‰ç”¨ç›å’Œé»‘èƒ¡æ¤’è…Œåˆ¶15åˆ†é’Ÿ",
                    "å¹³åº•é”…å°‘æ²¹ï¼Œä¸­ç«ç…é¸¡èƒ¸è‚‰è‡³ä¸¤é¢é‡‘é»„",
                    "ç…å¥½ååˆ‡æ¡å¤‡ç”¨",
                    "ç”Ÿèœæ´—å‡€æ’•æˆå°ç‰‡",
                    "å°ç•ªèŒ„å¯¹åŠåˆ‡å¼€",
                    "æ‰€æœ‰è”¬èœæ··åˆï¼ŒåŠ å…¥ç‰ç±³ç²’",
                    "æ·‹ä¸Šæ©„æ¦„æ²¹å’ŒæŸ æª¬æ±ï¼Œæ‹ŒåŒ€",
                    "æœ€åæ”¾ä¸Šé¸¡èƒ¸è‚‰æ¡å³å¯"
                ],
                tips: "é¸¡èƒ¸è‚‰å¯ä»¥æå‰è…Œåˆ¶è¿‡å¤œæ›´å…¥å‘³ï¼Œç…åˆ¶æ—¶ç”¨ä¸­ç«é¿å…å¤–ç„¦é‡Œç”Ÿã€‚"
            },
            {
                n:"ç•ªèŒ„ç½—å‹’æ„é¢", k:380, t:"balanced", i:["æ„é¢","ç•ªèŒ„","ç½—å‹’","å¤§è’œ"], p:12, c:65,
                ingredients: [
                    {name: "æ„å¤§åˆ©é¢", amount: "100g"},
                    {name: "ç•ªèŒ„", amount: "2ä¸ª"},
                    {name: "æ–°é²œç½—å‹’", amount: "10ç‰‡"},
                    {name: "å¤§è’œ", amount: "3ç“£"},
                    {name: "æ©„æ¦„æ²¹", amount: "2å‹º"},
                    {name: "ç›", amount: "é€‚é‡"},
                    {name: "é»‘èƒ¡æ¤’", amount: "é€‚é‡"},
                    {name: "å¸•ç›æ£®å¥¶é…ª", amount: "é€‚é‡"}
                ],
                steps: [
                    "ç•ªèŒ„é¡¶éƒ¨åˆ’åå­—ï¼Œå¼€æ°´çƒ«30ç§’åå»çš®åˆ‡ä¸",
                    "å¤§è’œåˆ‡ç‰‡ï¼Œç½—å‹’æ´—å‡€",
                    "å¤§é”…ç…®æ°´ï¼Œæ°´å¼€ååŠ ç›ï¼Œæ”¾å…¥æ„é¢ç…®8-10åˆ†é’Ÿ",
                    "å¹³åº•é”…çƒ­æ©„æ¦„æ²¹ï¼Œå°ç«ç‚’é¦™å¤§è’œ",
                    "åŠ å…¥ç•ªèŒ„ä¸ï¼Œä¸­ç«ç‚’è‡³å‡ºæ±",
                    "ç”¨é“²å­å‹ç¢ç•ªèŒ„ï¼Œç…®è‡³æµ“ç¨ ",
                    "åŠ å…¥ç…®å¥½çš„æ„é¢ï¼Œç¿»ç‚’å‡åŒ€",
                    "å…³ç«ï¼ŒåŠ å…¥ç½—å‹’å¶å’Œé»‘èƒ¡æ¤’",
                    "è£…ç›˜ï¼Œæ’’ä¸Šå¸•ç›æ£®å¥¶é…ªå³å¯"
                ],
                tips: "ç•ªèŒ„è¦ç‚’åˆ°å®Œå…¨å‡ºæ±ï¼Œè¿™æ ·é…±æ±æ‰æµ“éƒã€‚ç…®æ„é¢çš„æ°´è¦åŠ è¶³ç›ï¼Œè¿™æ ·é¢æ¡æ‰æœ‰å‘³é“ã€‚"
            },
            {
                n:"ä¸‰æ–‡é±¼æ³¢å¥‡é¥­", k:500, t:"balanced", i:["ä¸‰æ–‡é±¼","ç±³é¥­","æµ·è‹”","ç‰›æ²¹æœ"], p:30, c:45,
                ingredients: [
                    {name: "ä¸‰æ–‡é±¼", amount: "150g"},
                    {name: "ç±³é¥­", amount: "150g"},
                    {name: "ç‰›æ²¹æœ", amount: "1/2ä¸ª"},
                    {name: "æµ·è‹”", amount: "2ç‰‡"},
                    {name: "é»„ç“œ", amount: "1/3æ ¹"},
                    {name: "æ—¥å¼é…±æ²¹", amount: "2å‹º"},
                    {name: "èŠ¥æœ«", amount: "å°‘è®¸"},
                    {name: "èŠéº»", amount: "é€‚é‡"}
                ],
                steps: [
                    "ä¸‰æ–‡é±¼åˆ‡å—ï¼Œç”¨é…±æ²¹å’ŒèŠ¥æœ«è…Œåˆ¶10åˆ†é’Ÿ",
                    "ç±³é¥­ç…®ç†Ÿåæ”¾å‡‰",
                    "ç‰›æ²¹æœåˆ‡ç‰‡ï¼Œé»„ç“œåˆ‡ä¸",
                    "æµ·è‹”å‰ªæˆç»†ä¸",
                    "ç¢—ä¸­é“ºä¸Šç±³é¥­",
                    "ä¾æ¬¡æ‘†æ”¾ä¸‰æ–‡é±¼ã€ç‰›æ²¹æœã€é»„ç“œ",
                    "æ’’ä¸Šæµ·è‹”ä¸å’ŒèŠéº»",
                    "æ·‹ä¸Šæ—¥å¼é…±æ²¹å³å¯"
                ],
                tips: "ä¸‰æ–‡é±¼è¦æ–°é²œï¼Œç±³é¥­è¦æ¸©çƒ­ä½†ä¸èƒ½å¤ªçƒ«ã€‚å¯ä»¥åŠ å…¥ä¸€äº›æ—¥å¼æ³¡èœå¢åŠ å£æ„Ÿå±‚æ¬¡ã€‚"
            },
            {
                n:"è’œè“‰è¥¿å…°èŠ±", k:120, t:"light", i:["è¥¿å…°èŠ±","å¤§è’œ","æ©„æ¦„æ²¹"], p:5, c:8,
                ingredients: [
                    {name: "è¥¿å…°èŠ±", amount: "300g"},
                    {name: "å¤§è’œ", amount: "4ç“£"},
                    {name: "æ©„æ¦„æ²¹", amount: "1å‹º"},
                    {name: "ç›", amount: "é€‚é‡"},
                    {name: "èšæ²¹", amount: "1å‹ºï¼ˆå¯é€‰ï¼‰"}
                ],
                steps: [
                    "è¥¿å…°èŠ±æ°æˆå°æœµï¼Œç”¨ç›æ°´æµ¸æ³¡10åˆ†é’Ÿ",
                    "å¤§è’œåˆ‡æœ«",
                    "é”…ä¸­çƒ§æ°´ï¼Œæ°´å¼€ååŠ å°‘è®¸ç›å’Œæ²¹",
                    "æ”¾å…¥è¥¿å…°èŠ±ç„¯æ°´1-2åˆ†é’Ÿï¼Œæå‡ºè¿‡å‡‰",
                    "çƒ­é”…ä¸‹æ²¹ï¼Œå°ç«çˆ†é¦™è’œæœ«",
                    "åŠ å…¥è¥¿å…°èŠ±å¤§ç«å¿«ç‚’",
                    "åŠ ç›è°ƒå‘³ï¼Œå¯åŠ èšæ²¹æé²œ",
                    "ç‚’åŒ€å³å¯å‡ºé”…"
                ],
                tips: "ç„¯æ°´æ—¶é—´ä¸è¦å¤ªé•¿ï¼Œä¿æŒè„†å«©å£æ„Ÿã€‚è’œæœ«è¦å°ç«ç‚’ï¼Œé¿å…ç‚’ç„¦å‘è‹¦ã€‚"
            },
            {
                n:"ç…§çƒ§é¸¡è…¿é¥­", k:600, t:"meat", i:["é¸¡è…¿","ç±³é¥­","ç…§çƒ§é…±"], p:40, c:55,
                ingredients: [
                    {name: "é¸¡è…¿", amount: "2ä¸ª"},
                    {name: "ç±³é¥­", amount: "200g"},
                    {name: "ç…§çƒ§é…±", amount: "3å‹º"},
                    {name: "ç”ŸæŠ½", amount: "2å‹º"},
                    {name: "æ–™é…’", amount: "1å‹º"},
                    {name: "èœ‚èœœ", amount: "1å‹º"},
                    {name: "å§œ", amount: "2ç‰‡"}
                ],
                steps: [
                    "é¸¡è…¿å»éª¨ï¼Œç”¨åˆ€èƒŒæ‹æ¾",
                    "ç”¨ç”ŸæŠ½ã€æ–™é…’ã€å§œç‰‡è…Œåˆ¶30åˆ†é’Ÿ",
                    "ç…§çƒ§é…±ã€ç”ŸæŠ½ã€èœ‚èœœè°ƒæˆç…§çƒ§æ±",
                    "å¹³åº•é”…çƒ­æ²¹ï¼Œé¸¡çš®æœä¸‹ç…è‡³é‡‘é»„",
                    "ç¿»é¢ç»§ç»­ç…è‡³ç†Ÿé€",
                    "å€’å…¥ç…§çƒ§æ±ï¼Œå°ç«æ”¶æ±",
                    "é¸¡è…¿åˆ‡å—ï¼Œæ”¾åœ¨ç±³é¥­ä¸Š",
                    "æ·‹ä¸Šå‰©ä½™ç…§çƒ§æ±å³å¯"
                ],
                tips: "é¸¡è…¿è¦å»éª¨ï¼Œè¿™æ ·æ›´å®¹æ˜“å…¥å‘³å’Œç…åˆ¶ã€‚ç…§çƒ§æ±è¦æ”¶æµ“ï¼Œè¿™æ ·æ‰æœ‰å…‰æ³½å’Œå‘³é“ã€‚"
            },
            {
                n:"å…¨éº¦ä¸‰æ˜æ²»", k:300, t:"light", i:["å…¨éº¦é¢åŒ…","é¸¡è›‹","ç«è…¿","ç”Ÿèœ"], p:18, c:35,
                ingredients: [
                    {name: "å…¨éº¦é¢åŒ…", amount: "2ç‰‡"},
                    {name: "é¸¡è›‹", amount: "1ä¸ª"},
                    {name: "ç«è…¿ç‰‡", amount: "2ç‰‡"},
                    {name: "ç”Ÿèœ", amount: "2ç‰‡"},
                    {name: "ç•ªèŒ„", amount: "2ç‰‡"},
                    {name: "è›‹é»„é…±", amount: "é€‚é‡"},
                    {name: "é»‘èƒ¡æ¤’", amount: "å°‘è®¸"}
                ],
                steps: [
                    "é¸¡è›‹ç…®ç†Ÿï¼Œåˆ‡ç‰‡",
                    "ç”Ÿèœå’Œç•ªèŒ„æ´—å‡€åˆ‡ç‰‡",
                    "é¢åŒ…ç‰‡å¯ä»¥ç¨å¾®çƒ¤ä¸€ä¸‹",
                    "åœ¨ä¸€ç‰‡é¢åŒ…ä¸Šæ¶‚è›‹é»„é…±",
                    "ä¾æ¬¡æ”¾ä¸Šç”Ÿèœã€ç•ªèŒ„ã€é¸¡è›‹ã€ç«è…¿",
                    "æ’’ä¸Šé»‘èƒ¡æ¤’",
                    "ç›–ä¸Šå¦ä¸€ç‰‡é¢åŒ…",
                    "å¯¹è§’åˆ‡å¼€å³å¯"
                ],
                tips: "é¢åŒ…ç¨å¾®çƒ¤ä¸€ä¸‹ä¼šæ›´é¦™è„†ã€‚å¯ä»¥æ ¹æ®å–œå¥½åŠ å…¥é»„ç“œã€æ´‹è‘±ç­‰è”¬èœã€‚"
            },
            {
                n:"éº»å©†è±†è…", k:280, t:"balanced", i:["è±†è…","è‚‰æœ«","è±†ç“£é…±"], p:15, c:12,
                ingredients: [
                    {name: "å«©è±†è…", amount: "300g"},
                    {name: "çŒªè‚‰æœ«", amount: "100g"},
                    {name: "è±†ç“£é…±", amount: "1å‹º"},
                    {name: "èŠ±æ¤’ç²‰", amount: "1å°å‹º"},
                    {name: "è‘±", amount: "2æ ¹"},
                    {name: "è’œ", amount: "2ç“£"},
                    {name: "ç”ŸæŠ½", amount: "1å‹º"},
                    {name: "æ°´æ·€ç²‰", amount: "é€‚é‡"}
                ],
                steps: [
                    "è±†è…åˆ‡å—ï¼Œç”¨ç›æ°´ç„¯ä¸€ä¸‹å»è±†è…¥å‘³",
                    "çƒ­é”…ä¸‹æ²¹ï¼Œç‚’é¦™è‚‰æœ«",
                    "åŠ å…¥è±†ç“£é…±ç‚’å‡ºçº¢æ²¹",
                    "åŠ å…¥è’œæœ«ç‚’é¦™",
                    "å€’å…¥é€‚é‡æ°´ï¼ŒåŠ ç”ŸæŠ½è°ƒå‘³",
                    "æ”¾å…¥è±†è…ï¼Œå°ç«ç…®5åˆ†é’Ÿ",
                    "ç”¨æ°´æ·€ç²‰å‹¾èŠ¡",
                    "æ’’ä¸ŠèŠ±æ¤’ç²‰å’Œè‘±èŠ±å³å¯"
                ],
                tips: "è±†è…è¦ç”¨ç›æ°´ç„¯ä¸€ä¸‹ï¼Œè¿™æ ·ä¸å®¹æ˜“ç¢ã€‚å‹¾èŠ¡è¦åˆ†æ¬¡åŠ å…¥ï¼Œæ…¢æ…¢æ”¶æ±ã€‚"
            },
            {
                n:"æ¸…è’¸é²ˆé±¼", k:250, t:"light", i:["é²ˆé±¼","å§œ","è‘±"], p:35, c:2,
                ingredients: [
                    {name: "é²ˆé±¼", amount: "1æ¡ï¼ˆçº¦500gï¼‰"},
                    {name: "å§œ", amount: "1å—"},
                    {name: "è‘±", amount: "2æ ¹"},
                    {name: "è’¸é±¼è±‰æ²¹", amount: "2å‹º"},
                    {name: "æ–™é…’", amount: "1å‹º"},
                    {name: "ç›", amount: "å°‘è®¸"}
                ],
                steps: [
                    "é²ˆé±¼å¤„ç†å¹²å‡€ï¼Œä¸¤é¢åˆ’å‡ åˆ€",
                    "ç”¨ç›å’Œæ–™é…’è…Œåˆ¶10åˆ†é’Ÿ",
                    "å§œåˆ‡ç‰‡ï¼Œè‘±åˆ‡ä¸",
                    "ç›˜åº•é“ºå§œç‰‡ï¼Œæ”¾ä¸Šé²ˆé±¼",
                    "é±¼èº«ä¸Šä¹Ÿæ”¾å‡ ç‰‡å§œ",
                    "æ°´å¼€åä¸Šé”…è’¸8-10åˆ†é’Ÿ",
                    "è’¸å¥½åå€’æ‰ç›˜ä¸­æ°´",
                    "æ’’ä¸Šè‘±ä¸ï¼Œæ·‹ä¸Šçƒ­æ²¹",
                    "æœ€åæ·‹ä¸Šè’¸é±¼è±‰æ²¹å³å¯"
                ],
                tips: "è’¸é±¼æ—¶é—´æ ¹æ®é±¼çš„å¤§å°è°ƒæ•´ï¼Œä¸€èˆ¬8-10åˆ†é’Ÿå³å¯ã€‚è’¸å¥½åè¦å€’æ‰è…¥æ°´ï¼Œè¿™æ ·æ›´é²œç¾ã€‚"
            },
            {
                n:"çº¢çƒ§è‚‰", k:650, t:"meat", i:["äº”èŠ±è‚‰","å†°ç³–","ç”ŸæŠ½"], p:25, c:8,
                ingredients: [
                    {name: "äº”èŠ±è‚‰", amount: "500g"},
                    {name: "å†°ç³–", amount: "30g"},
                    {name: "ç”ŸæŠ½", amount: "3å‹º"},
                    {name: "è€æŠ½", amount: "1å‹º"},
                    {name: "æ–™é…’", amount: "2å‹º"},
                    {name: "å§œ", amount: "3ç‰‡"},
                    {name: "è‘±", amount: "1æ ¹"},
                    {name: "å…«è§’", amount: "2ä¸ª"}
                ],
                steps: [
                    "äº”èŠ±è‚‰åˆ‡å—ï¼Œå†·æ°´ä¸‹é”…ç„¯æ°´",
                    "æå‡ºæ´—å‡€ï¼Œæ²¥å¹²æ°´åˆ†",
                    "çƒ­é”…ä¸‹æ²¹ï¼Œå°ç«ç‚’ç³–è‰²",
                    "ç³–è‰²ç‚’å¥½åä¸‹äº”èŠ±è‚‰ç¿»ç‚’",
                    "åŠ å…¥æ–™é…’ã€ç”ŸæŠ½ã€è€æŠ½",
                    "åŠ å…¥å§œç‰‡ã€è‘±æ®µã€å…«è§’",
                    "å€’å…¥çƒ­æ°´æ²¡è¿‡è‚‰ï¼Œå¤§ç«çƒ§å¼€",
                    "è½¬å°ç«ç‚–1å°æ—¶",
                    "æœ€åå¤§ç«æ”¶æ±å³å¯"
                ],
                tips: "ç‚’ç³–è‰²è¦ç”¨å°ç«ï¼Œé¿å…ç‚’ç„¦å‘è‹¦ã€‚ç‚–ç…®æ—¶è¦ç”¨çƒ­æ°´ï¼Œè¿™æ ·è‚‰è´¨æ›´å«©ã€‚"
            },
            {
                n:"è”¬èœæ²™æ‹‰", k:150, t:"light", i:["ç”Ÿèœ","é»„ç“œ","èƒ¡èåœ","æ©„æ¦„æ²¹"], p:3, c:10,
                ingredients: [
                    {name: "ç”Ÿèœ", amount: "100g"},
                    {name: "é»„ç“œ", amount: "1æ ¹"},
                    {name: "èƒ¡èåœ", amount: "1/2æ ¹"},
                    {name: "å°ç•ªèŒ„", amount: "5ä¸ª"},
                    {name: "æ©„æ¦„æ²¹", amount: "2å‹º"},
                    {name: "æŸ æª¬æ±", amount: "1å‹º"},
                    {name: "ç›", amount: "å°‘è®¸"},
                    {name: "é»‘èƒ¡æ¤’", amount: "å°‘è®¸"}
                ],
                steps: [
                    "æ‰€æœ‰è”¬èœæ´—å‡€",
                    "ç”Ÿèœæ’•æˆå°ç‰‡",
                    "é»„ç“œåˆ‡ç‰‡ï¼Œèƒ¡èåœåˆ‡ä¸",
                    "å°ç•ªèŒ„å¯¹åŠåˆ‡å¼€",
                    "æ‰€æœ‰è”¬èœæ··åˆ",
                    "è°ƒæ²¹é†‹æ±ï¼šæ©„æ¦„æ²¹+æŸ æª¬æ±+ç›+é»‘èƒ¡æ¤’",
                    "æ·‹ä¸Šæ²¹é†‹æ±ï¼Œæ‹ŒåŒ€å³å¯"
                ],
                tips: "è”¬èœè¦æ–°é²œï¼Œæ´—å‡€åè¦æ²¥å¹²æ°´åˆ†ã€‚æ²¹é†‹æ±è¦ç°è°ƒç°ç”¨ï¼Œè¿™æ ·æ›´æ¸…çˆ½ã€‚"
            },
            {
                n:"è›‹ç‚’é¥­", k:350, t:"quick", i:["ç±³é¥­","é¸¡è›‹","è‘±èŠ±"], p:12, c:45,
                ingredients: [
                    {name: "ç±³é¥­", amount: "200g"},
                    {name: "é¸¡è›‹", amount: "2ä¸ª"},
                    {name: "è‘±èŠ±", amount: "é€‚é‡"},
                    {name: "ç›", amount: "é€‚é‡"},
                    {name: "ç”ŸæŠ½", amount: "1å‹º"},
                    {name: "æ²¹", amount: "2å‹º"}
                ],
                steps: [
                    "ç±³é¥­æœ€å¥½ç”¨éš”å¤œé¥­ï¼Œç²’ç²’åˆ†æ˜",
                    "é¸¡è›‹æ‰“æ•£ï¼ŒåŠ å°‘è®¸ç›",
                    "çƒ­é”…ä¸‹æ²¹ï¼Œç‚’ç†Ÿé¸¡è›‹ç››èµ·",
                    "é”…ä¸­å†ä¸‹æ²¹ï¼Œå€’å…¥ç±³é¥­ç‚’æ•£",
                    "åŠ å…¥ç”ŸæŠ½å’Œç›è°ƒå‘³",
                    "å€’å…¥ç‚’å¥½çš„é¸¡è›‹",
                    "æœ€åæ’’ä¸Šè‘±èŠ±ï¼Œç‚’åŒ€å³å¯"
                ],
                tips: "ç”¨éš”å¤œé¥­æ•ˆæœæœ€å¥½ï¼Œç±³é¥­è¦ç‚’æ•£ç‚’å¹²ã€‚é¸¡è›‹å¯ä»¥ç¨å¾®ç‚’è€ä¸€ç‚¹ï¼Œè¿™æ ·æ›´é¦™ã€‚"
            },
            {
                n:"å®«ä¿é¸¡ä¸", k:420, t:"balanced", i:["é¸¡èƒ¸è‚‰","èŠ±ç”Ÿ","è¾£æ¤’"], p:30, c:20,
                ingredients: [
                    {name: "é¸¡èƒ¸è‚‰", amount: "200g"},
                    {name: "èŠ±ç”Ÿç±³", amount: "50g"},
                    {name: "å¹²è¾£æ¤’", amount: "5ä¸ª"},
                    {name: "èŠ±æ¤’", amount: "1å°å‹º"},
                    {name: "ç”ŸæŠ½", amount: "2å‹º"},
                    {name: "é†‹", amount: "1å‹º"},
                    {name: "ç³–", amount: "1å‹º"},
                    {name: "è‘±", amount: "2æ ¹"},
                    {name: "å§œ", amount: "2ç‰‡"},
                    {name: "è’œ", amount: "2ç“£"}
                ],
                steps: [
                    "é¸¡èƒ¸è‚‰åˆ‡ä¸ï¼Œç”¨ç”ŸæŠ½å’Œæ–™é…’è…Œåˆ¶",
                    "è°ƒå®«ä¿æ±ï¼šç”ŸæŠ½+é†‹+ç³–+æ°´æ·€ç²‰",
                    "èŠ±ç”Ÿç±³ç‚¸è„†å¤‡ç”¨",
                    "çƒ­é”…ä¸‹æ²¹ï¼Œç‚’é¦™èŠ±æ¤’å’Œå¹²è¾£æ¤’",
                    "ä¸‹é¸¡ä¸ç‚’è‡³å˜è‰²",
                    "åŠ å…¥è‘±å§œè’œç‚’é¦™",
                    "å€’å…¥å®«ä¿æ±ï¼Œå¤§ç«æ”¶æ±",
                    "æœ€ååŠ å…¥èŠ±ç”Ÿç±³ç‚’åŒ€å³å¯"
                ],
                tips: "é¸¡ä¸è¦åˆ‡å¾—å¤§å°ä¸€è‡´ï¼Œè¿™æ ·å—çƒ­å‡åŒ€ã€‚èŠ±ç”Ÿç±³è¦æœ€åæ”¾ï¼Œä¿æŒè„†åº¦ã€‚"
            },
            {
                n:"ç•ªèŒ„é¸¡è›‹é¢", k:320, t:"quick", i:["é¢æ¡","ç•ªèŒ„","é¸¡è›‹"], p:15, c:50,
                ingredients: [
                    {name: "é¢æ¡", amount: "150g"},
                    {name: "ç•ªèŒ„", amount: "2ä¸ª"},
                    {name: "é¸¡è›‹", amount: "2ä¸ª"},
                    {name: "è‘±èŠ±", amount: "é€‚é‡"},
                    {name: "ç›", amount: "é€‚é‡"},
                    {name: "ç³–", amount: "1å°å‹º"},
                    {name: "æ²¹", amount: "2å‹º"}
                ],
                steps: [
                    "ç•ªèŒ„é¡¶éƒ¨åˆ’åå­—ï¼Œå¼€æ°´çƒ«åå»çš®åˆ‡å—",
                    "é¸¡è›‹æ‰“æ•£ï¼ŒåŠ å°‘è®¸ç›",
                    "çƒ­é”…ä¸‹æ²¹ï¼Œç‚’ç†Ÿé¸¡è›‹ç››èµ·",
                    "é”…ä¸­ä¸‹æ²¹ï¼Œç‚’ç•ªèŒ„è‡³å‡ºæ±",
                    "åŠ å°‘è®¸ç³–æé²œï¼ŒåŠ ç›è°ƒå‘³",
                    "å€’å…¥é€‚é‡æ°´ï¼Œç…®å¼€",
                    "ä¸‹å…¥é¢æ¡ç…®ç†Ÿ",
                    "æœ€ååŠ å…¥ç‚’å¥½çš„é¸¡è›‹å’Œè‘±èŠ±å³å¯"
                ],
                tips: "ç•ªèŒ„è¦ç‚’åˆ°å‡ºæ±ï¼Œè¿™æ ·æ±¤æ‰æµ“éƒã€‚åŠ ä¸€ç‚¹ç³–å¯ä»¥ä¸­å’Œç•ªèŒ„çš„é…¸å‘³ã€‚"
            },
            {
                n:"ç´«èœè›‹èŠ±æ±¤", k:80, t:"light", i:["ç´«èœ","é¸¡è›‹","è‘±èŠ±"], p:5, c:3,
                ingredients: [
                    {name: "ç´«èœ", amount: "10g"},
                    {name: "é¸¡è›‹", amount: "1ä¸ª"},
                    {name: "è‘±èŠ±", amount: "é€‚é‡"},
                    {name: "ç›", amount: "é€‚é‡"},
                    {name: "é¦™æ²¹", amount: "å‡ æ»´"},
                    {name: "æ°´", amount: "500ml"}
                ],
                steps: [
                    "ç´«èœç”¨æ¸©æ°´æ³¡è½¯",
                    "é¸¡è›‹æ‰“æ•£",
                    "é”…ä¸­çƒ§æ°´ï¼Œæ°´å¼€åä¸‹ç´«èœ",
                    "å†æ¬¡ç…®å¼€åï¼Œæ…¢æ…¢å€’å…¥è›‹æ¶²",
                    "ç”¨ç­·å­å¿«é€Ÿæ…æ•£æˆè›‹èŠ±",
                    "åŠ ç›è°ƒå‘³",
                    "å…³ç«ï¼Œæ’’ä¸Šè‘±èŠ±",
                    "æœ€åæ»´å‡ æ»´é¦™æ²¹å³å¯"
                ],
                tips: "è›‹æ¶²è¦æ…¢æ…¢å€’å…¥ï¼ŒåŒæ—¶å¿«é€Ÿæ…æ‹Œï¼Œè¿™æ ·è›‹èŠ±æ‰æ¼‚äº®ã€‚ç´«èœä¸è¦ç…®å¤ªä¹…ï¼Œä¿æŒé²œå‘³ã€‚"
            },
            {
                n:"ç³–é†‹æ’éª¨", k:580, t:"meat", i:["æ’éª¨","ç³–","é†‹"], p:28, c:15,
                ingredients: [
                    {name: "æ’éª¨", amount: "500g"},
                    {name: "ç³–", amount: "2å‹º"},
                    {name: "é†‹", amount: "3å‹º"},
                    {name: "ç”ŸæŠ½", amount: "2å‹º"},
                    {name: "æ–™é…’", amount: "1å‹º"},
                    {name: "å§œ", amount: "3ç‰‡"},
                    {name: "è‘±", amount: "1æ ¹"},
                    {name: "ç™½èŠéº»", amount: "é€‚é‡"}
                ],
                steps: [
                    "æ’éª¨åˆ‡æ®µï¼Œå†·æ°´ä¸‹é”…ç„¯æ°´",
                    "æå‡ºæ´—å‡€ï¼Œæ²¥å¹²",
                    "çƒ­é”…ä¸‹æ²¹ï¼Œå°ç«ç‚’ç³–è‰²",
                    "ä¸‹æ’éª¨ç¿»ç‚’ä¸Šè‰²",
                    "åŠ å…¥æ–™é…’ã€ç”ŸæŠ½ã€é†‹",
                    "åŠ å…¥å§œç‰‡å’Œè‘±æ®µ",
                    "å€’å…¥çƒ­æ°´æ²¡è¿‡æ’éª¨",
                    "å¤§ç«çƒ§å¼€ï¼Œè½¬å°ç«ç‚–30åˆ†é’Ÿ",
                    "æœ€åå¤§ç«æ”¶æ±ï¼Œæ’’ä¸Šç™½èŠéº»"
                ],
                tips: "ç‚’ç³–è‰²æ˜¯å…³é”®ï¼Œè¦ç”¨å°ç«æ…¢æ…¢ç‚’ã€‚ç³–é†‹æ¯”ä¾‹å¯ä»¥æ ¹æ®ä¸ªäººå£å‘³è°ƒæ•´ã€‚"
            },
            {
                n:"å‡‰æ‹Œé»„ç“œ", k:50, t:"light", i:["é»„ç“œ","è’œ","é†‹"], p:1, c:5,
                ingredients: [
                    {name: "é»„ç“œ", amount: "2æ ¹"},
                    {name: "å¤§è’œ", amount: "3ç“£"},
                    {name: "é†‹", amount: "2å‹º"},
                    {name: "ç”ŸæŠ½", amount: "1å‹º"},
                    {name: "é¦™æ²¹", amount: "å‡ æ»´"},
                    {name: "ç³–", amount: "1å°å‹º"},
                    {name: "è¾£æ¤’æ²¹", amount: "é€‚é‡ï¼ˆå¯é€‰ï¼‰"}
                ],
                steps: [
                    "é»„ç“œæ´—å‡€ï¼Œç”¨åˆ€æ‹è£‚",
                    "åˆ‡æˆå°æ®µ",
                    "ç”¨ç›è…Œåˆ¶10åˆ†é’Ÿï¼Œå‡ºæ°´åå€’æ‰",
                    "å¤§è’œåˆ‡æœ«",
                    "è°ƒæ±ï¼šé†‹+ç”ŸæŠ½+ç³–+é¦™æ²¹+è’œæœ«",
                    "æ·‹åœ¨é»„ç“œä¸Šï¼Œæ‹ŒåŒ€",
                    "å¯ä»¥åŠ è¾£æ¤’æ²¹å¢åŠ é£å‘³",
                    "è…Œåˆ¶10åˆ†é’Ÿæ›´å…¥å‘³"
                ],
                tips: "é»„ç“œè¦æ‹è£‚ï¼Œè¿™æ ·æ›´å®¹æ˜“å…¥å‘³ã€‚ç”¨ç›è…Œåˆ¶å‡ºæ°´ï¼Œå£æ„Ÿæ›´è„†ã€‚"
            },
            {
                n:"ç™½åˆ‡é¸¡", k:300, t:"light", i:["é¸¡","å§œ","è‘±"], p:35, c:2,
                ingredients: [
                    {name: "é¸¡", amount: "1åªï¼ˆçº¦1kgï¼‰"},
                    {name: "å§œ", amount: "1å—"},
                    {name: "è‘±", amount: "3æ ¹"},
                    {name: "ç›", amount: "é€‚é‡"},
                    {name: "æ–™é…’", amount: "2å‹º"},
                    {name: "é¦™æ²¹", amount: "é€‚é‡"}
                ],
                steps: [
                    "é¸¡å¤„ç†å¹²å‡€ï¼Œç”¨ç›å’Œæ–™é…’è…Œåˆ¶",
                    "å¤§é”…çƒ§æ°´ï¼Œæ°´å¼€åæ”¾å…¥æ•´é¸¡",
                    "å¤§ç«ç…®5åˆ†é’Ÿï¼Œå…³ç«ç„–30åˆ†é’Ÿ",
                    "ç”¨ç­·å­æˆ³ä¸€ä¸‹ï¼Œæ²¡æœ‰è¡€æ°´å³å¯",
                    "æå‡ºè¿‡å†°æ°´ï¼Œä¿æŒçš®è„†",
                    "å§œè‘±åˆ‡æœ«ï¼Œç”¨çƒ­æ²¹çˆ†é¦™",
                    "åŠ ç›å’Œé¦™æ²¹è°ƒæˆè˜¸æ–™",
                    "é¸¡åˆ‡å—ï¼Œè˜¸æ–™é£Ÿç”¨"
                ],
                tips: "ç…®é¸¡è¦ç”¨ç„–çš„æ–¹å¼ï¼Œè¿™æ ·è‚‰è´¨æ›´å«©ã€‚è¿‡å†°æ°´å¯ä»¥è®©é¸¡çš®æ›´è„†ã€‚"
            },
            {
                n:"é’æ¤’è‚‰ä¸", k:380, t:"balanced", i:["é’æ¤’","çŒªè‚‰","ç”ŸæŠ½"], p:25, c:12,
                ingredients: [
                    {name: "çŒªè‚‰ä¸", amount: "200g"},
                    {name: "é’æ¤’", amount: "3ä¸ª"},
                    {name: "ç”ŸæŠ½", amount: "2å‹º"},
                    {name: "æ–™é…’", amount: "1å‹º"},
                    {name: "æ·€ç²‰", amount: "1å‹º"},
                    {name: "å§œ", amount: "2ç‰‡"},
                    {name: "è’œ", amount: "2ç“£"},
                    {name: "ç›", amount: "é€‚é‡"}
                ],
                steps: [
                    "çŒªè‚‰åˆ‡ä¸ï¼Œç”¨ç”ŸæŠ½ã€æ–™é…’ã€æ·€ç²‰è…Œåˆ¶",
                    "é’æ¤’åˆ‡ä¸",
                    "çƒ­é”…ä¸‹æ²¹ï¼Œæ»‘ç‚’è‚‰ä¸è‡³å˜è‰²ç››èµ·",
                    "é”…ä¸­ç•™æ²¹ï¼Œç‚’é¦™å§œè’œ",
                    "ä¸‹é’æ¤’ä¸ç‚’è‡³æ–­ç”Ÿ",
                    "å€’å…¥è‚‰ä¸ï¼ŒåŠ ç›å’Œç”ŸæŠ½",
                    "å¤§ç«å¿«ç‚’ï¼Œç‚’åŒ€å³å¯"
                ],
                tips: "è‚‰ä¸è¦æå‰è…Œåˆ¶ï¼Œè¿™æ ·æ›´å«©æ»‘ã€‚é’æ¤’ä¸è¦ç‚’å¤ªä¹…ï¼Œä¿æŒè„†å«©ã€‚"
            },
            {
                n:"è’¸è›‹", k:120, t:"light", i:["é¸¡è›‹","æ°´","ç›"], p:8, c:2,
                ingredients: [
                    {name: "é¸¡è›‹", amount: "2ä¸ª"},
                    {name: "æ¸©æ°´", amount: "200ml"},
                    {name: "ç›", amount: "å°‘è®¸"},
                    {name: "ç”ŸæŠ½", amount: "1å‹º"},
                    {name: "é¦™æ²¹", amount: "å‡ æ»´"},
                    {name: "è‘±èŠ±", amount: "é€‚é‡"}
                ],
                steps: [
                    "é¸¡è›‹æ‰“æ•£ï¼ŒåŠ ç›",
                    "åŠ å…¥æ¸©æ°´ï¼Œæ¯”ä¾‹1:1.5",
                    "ç”¨ç­›ç½‘è¿‡æ»¤ï¼Œå»é™¤æ°”æ³¡",
                    "ç›–ä¸Šä¿é²œè†œï¼Œç”¨ç‰™ç­¾æ‰å‡ ä¸ªå­”",
                    "æ°´å¼€åä¸Šé”…è’¸10-12åˆ†é’Ÿ",
                    "è’¸å¥½åæ·‹ä¸Šç”ŸæŠ½å’Œé¦™æ²¹",
                    "æ’’ä¸Šè‘±èŠ±å³å¯"
                ],
                tips: "è›‹æ¶²è¦ç”¨æ¸©æ°´ï¼Œæ¯”ä¾‹è¦å‡†ç¡®ã€‚è¿‡æ»¤å’Œç›–ä¿é²œè†œå¯ä»¥è®©è’¸è›‹æ›´å«©æ»‘ã€‚"
            }
        ];

        let inventory = [];
        let plan = [];
        let tempMenu = [];
        let selectedDate = 'today';
        let firstUseDate = null;

        // æ•°æ®æŒä¹…åŒ–
        function saveData() {
            localStorage.setItem('menuPlanner_inventory', JSON.stringify(inventory));
            localStorage.setItem('menuPlanner_plan', JSON.stringify(plan));
            localStorage.setItem('menuPlanner_firstUse', firstUseDate || new Date().toISOString());
        }

        function loadData() {
            const savedInv = localStorage.getItem('menuPlanner_inventory');
            const savedPlan = localStorage.getItem('menuPlanner_plan');
            const savedDate = localStorage.getItem('menuPlanner_firstUse');

            if (savedInv) inventory = JSON.parse(savedInv);
            if (savedPlan) plan = JSON.parse(savedPlan);
            if (savedDate) firstUseDate = savedDate;

            renderInv();
            renderPlan();
            updateStats();
        }

        // åˆå§‹åŒ–åŠ è½½æ•°æ®
        loadData();

        function showToast(msg, duration = 2000) {
            const t = document.getElementById('toast');
            t.innerText = msg;
            t.style.opacity = 1;
            t.style.transform = 'translateX(-50%) translateY(0)';
            setTimeout(() => {
                t.style.opacity = 0;
                t.style.transform = 'translateX(-50%) translateY(-10px)';
            }, duration);
        }

        function setSkin(name, el) {
            document.body.className = name;
            document.querySelectorAll('.skin-btn').forEach(b => b.classList.remove('active'));
            el.classList.add('active');
            showToast("ä¸»é¢˜å·²åˆ‡æ¢");
        }

        // ç”Ÿæˆèœå•
        function genMenu() {
            const pref = document.getElementById('pref').value;
            const count = parseInt(document.getElementById('menuCount').value);
            const genBtn = document.getElementById('genBtn');
            const genBtnText = document.getElementById('genBtnText');

            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            genBtn.disabled = true;
            genBtnText.innerHTML = '<span class="loading"></span> ç”Ÿæˆä¸­...';

            setTimeout(() => {
            let pool = db.filter(d => d.t === pref || pref === 'balanced');
            if(pool.length === 0) pool = db;
                tempMenu = pool.sort(() => 0.5 - Math.random()).slice(0, count);

                if(tempMenu.length === 0) {
                    showToast("æœªæ‰¾åˆ°åŒ¹é…çš„èœå•");
                    genBtn.disabled = false;
                    genBtnText.textContent = 'âœ¨ ç”Ÿæˆèœå•';
                    return;
                }

            document.getElementById('genResult').innerHTML = `
                    <div style="color:var(--accent); font-size:1.1rem; font-weight:bold; margin-bottom:8px;">
                        ${tempMenu[0].n}
                    </div>
                    <div style="font-size:0.85rem; opacity:0.8;">
                        å…± ${tempMenu.length} é“èœï¼Œæ€»çƒ­é‡ ${tempMenu.reduce((a,b) => a+b.k, 0)} kcal
                    </div>
                    <div style="font-size:0.75rem; margin-top:8px; opacity:0.6;">ğŸ‘‰ æŸ¥çœ‹å³ä¾§è¯¦æƒ…</div>
                `;

                renderMenuList();
                updateMenuNutrition();

                document.getElementById('addPlanBtn').disabled = false;
                genBtn.disabled = false;
                genBtnText.textContent = 'âœ¨ ç”Ÿæˆèœå•';
                showToast(`æˆåŠŸç”Ÿæˆ ${tempMenu.length} é“èœ`);
            }, 800);
        }

        function renderMenuList() {
            const menuList = document.getElementById('menuList');
            if(tempMenu.length === 0) {
                menuList.innerHTML = '<li class="item empty-state" style="justify-content: center; opacity: 0.5; border: none;"><div>è¯·å…ˆåœ¨å·¦ä¾§ç”Ÿæˆèœå•</div></li>';
                return;
            }

            menuList.innerHTML = tempMenu.map((x, idx) => `
                <li class="item fade-in" style="animation-delay: ${idx * 0.1}s;">
                    <div style="flex: 1;">
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <span style="font-weight: bold;">${idx + 1}. ${x.n}</span>
                            <button class="view-recipe-btn" onclick="showRecipe('${x.n}'); event.stopPropagation();" title="æŸ¥çœ‹åšæ³•">ğŸ“–</button>
                        </div>
                        <div style="font-size: 0.75rem; opacity: 0.7; margin-top: 3px;">
                            ${x.i.slice(0, 3).join('ã€')}${x.i.length > 3 ? '...' : ''}
                        </div>
                    </div>
                    <small style="color: var(--accent); font-weight: bold;">${x.k} kcal</small>
                </li>
            `).join('');
        }

        function updateMenuNutrition() {
            if(tempMenu.length === 0) {
                document.getElementById('menuNutrition').style.display = 'none';
                return;
            }

            const total = tempMenu.reduce((acc, m) => ({
                k: acc.k + (m.k || 0),
                p: acc.p + (m.p || 0),
                c: acc.c + (m.c || 0)
            }), {k: 0, p: 0, c: 0});

            document.getElementById('totalKcal').textContent = total.k;
            document.getElementById('totalProtein').textContent = total.p;
            document.getElementById('totalCarb').textContent = total.c;
            document.getElementById('menuNutrition').style.display = 'block';
        }

        function showMenuDetail(idx) {
            const menu = tempMenu[idx];
            if(!menu) return;
            showToast(`${menu.n}: ${menu.k} kcal | è›‹ç™½è´¨: ${menu.p}g | ç¢³æ°´: ${menu.c}g`, 3000);
        }

        // åŠ å…¥è®¡åˆ’
        function addToPlan() {
            if(tempMenu.length === 0) return showToast("è¯·å…ˆç”Ÿæˆèœå•");
            plan = [...plan, ...tempMenu];
            renderPlan();
            saveData();
            showToast(`å·²æ·»åŠ  ${tempMenu.length} é“èœåˆ°è®¡åˆ’`);
            setTimeout(() => jumpTo(3), 500);
        }

        // åº“å­˜ç®¡ç†
        function addIng() {
            const input = document.getElementById('ingInput');
            const val = input.value.trim();
            if(!val) {
                showToast("è¯·è¾“å…¥é£Ÿæåç§°");
                return;
            }

            // æ”¯æŒæ‰¹é‡æ·»åŠ ï¼ˆç”¨é€—å·æˆ–ç©ºæ ¼åˆ†éš”ï¼‰
            const items = val.split(/[ï¼Œ,ã€\s]+/).map(i => i.trim()).filter(i => i);

            let added = 0;
            items.forEach(item => {
                if(item && !inventory.includes(item)) {
                    inventory.push(item);
                    added++;
                }
            });

            if(added > 0) {
                renderInv();
                input.value = '';
                saveData();
                showToast(`å·²æ·»åŠ  ${added} ç§é£Ÿæ`);
            } else {
                showToast("é£Ÿæå·²å­˜åœ¨æˆ–æ— æ•ˆ");
            }
        }

        window.removeIng = function(val) {
            inventory = inventory.filter(i => i !== val);
            renderInv();
            saveData();
            showToast(`å·²åˆ é™¤ ${val}`, 1500);
        }

        function clearInventory() {
            if(inventory.length === 0) return;
            if(confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰åº“å­˜å—ï¼Ÿ')) {
                inventory = [];
                renderInv();
                saveData();
                showToast("åº“å­˜å·²æ¸…ç©º");
            }
        }

        // å¿«é€Ÿæ·»åŠ å¸¸ç”¨é£Ÿæ
        function quickAddCommon() {
            const common = ["é¸¡è›‹", "ç±³é¥­", "ç•ªèŒ„", "æ´‹è‘±", "å¤§è’œ", "é’æ¤’", "èƒ¡èåœ"];
            const toAdd = common.filter(item => !inventory.includes(item));
            if(toAdd.length === 0) {
                showToast("å¸¸ç”¨é£Ÿæå·²å…¨éƒ¨æ·»åŠ ");
                return;
            }
            inventory.push(...toAdd);
            renderInv();
            saveData();
            showToast(`å·²æ·»åŠ  ${toAdd.length} ç§å¸¸ç”¨é£Ÿæ`);
        }

        function renderInv() {
            const ingTags = document.getElementById('ingTags');
            const ingCount = document.getElementById('ingCount');
            const ingProgress = document.getElementById('ingProgress');

            if(inventory.length === 0) {
                ingTags.innerHTML = '<div class="empty-state" style="width: 100%; padding: 20px; opacity: 0.5;">æš‚æ— é£Ÿæï¼Œå¿«æ·»åŠ å§ï¼</div>';
            } else {
                ingTags.innerHTML = inventory.map(i => `
                    <div class="tag fade-in" onclick="removeIng('${i}')" title="ç‚¹å‡»åˆ é™¤">${i} Ã—</div>
            `).join('');
        }

            ingCount.textContent = inventory.length;
            const progress = Math.min((inventory.length / 20) * 100, 100);
            ingProgress.style.width = progress + '%';
        }

        renderInv();

        function matchRecipe() {
            if(inventory.length === 0) {
                showToast("è¯·å…ˆæ·»åŠ é£Ÿæ");
                return;
            }

            const matchBtn = document.getElementById('matchBtn');
            matchBtn.disabled = true;
            matchBtn.innerHTML = '<span class="loading"></span> åŒ¹é…ä¸­...';

            setTimeout(() => {
                const matches = db.filter(r => {
                    const matchCount = r.i.filter(ing => inventory.includes(ing)).length;
                    return matchCount > 0;
                }).map(r => {
                    const matchCount = r.i.filter(ing => inventory.includes(ing)).length;
                    const matchRate = Math.round((matchCount / r.i.length) * 100);
                    return {...r, matchRate};
                }).sort((a, b) => b.matchRate - a.matchRate);

                const matchList = document.getElementById('matchList');
                const matchStats = document.getElementById('matchStats');

                if(matches.length === 0) {
                    matchList.innerHTML = '<li class="item empty-state" style="justify-content:center; border:none;"><div>æš‚æ— åŒ¹é…</div></li>';
                    matchStats.style.display = 'none';
                } else {
                    const avgRate = Math.round(matches.reduce((a, b) => a + b.matchRate, 0) / matches.length);
                    matchStats.style.display = 'block';
                    document.getElementById('matchRate').textContent = avgRate;

                    matchList.innerHTML = matches.map((m, idx) => `
                        <li class="item fade-in" style="animation-delay: ${idx * 0.1}s;">
                            <div style="flex: 1;">
                                <div style="display: flex; align-items: center; gap: 8px;">
                                    <span style="font-weight: bold;">${m.n}</span>
                                    <button class="view-recipe-btn" onclick="showRecipe('${m.n}'); event.stopPropagation();" title="æŸ¥çœ‹åšæ³•">ğŸ“–</button>
                                </div>
                                <div style="font-size: 0.75rem; opacity: 0.7; margin-top: 3px;">
                                    éœ€è¦: ${m.i.join('ã€')}
                                </div>
                            </div>
                            <div style="text-align: right;">
                                <div style="color: var(--accent); font-weight: bold; font-size: 0.9rem;">${m.matchRate}%</div>
                                <small style="opacity: 0.7;">${m.k} kcal</small>
                            </div>
                        </li>
                    `).join('');
                }

                matchBtn.disabled = false;
                matchBtn.textContent = 'ğŸ” åŒ¹é…é£Ÿè°±';
                showToast(`æ‰¾åˆ° ${matches.length} ä¸ªåŒ¹é…é£Ÿè°±`);
            }, 600);
        }

        // è®¡åˆ’æ¸²æŸ“
        function renderPlan() {
            const planList = document.getElementById('planList');
            const planCount = document.getElementById('planCount');
            const calTotal = document.getElementById('calTotal');

            if(plan.length === 0) {
                planList.innerHTML = '<li class="item empty-state" style="justify-content: center; opacity: 0.5; border: none;"><div>æš‚æ— è®¡åˆ’ï¼Œå¿«å»æ·»åŠ å§ï¼</div></li>';
            } else {
                planList.innerHTML = plan.map((p, idx) => `
                    <li class="item fade-in" style="animation-delay: ${idx * 0.05}s;">
                        <div style="flex: 1;">
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <span style="font-weight: bold;">${idx+1}. ${p.n}</span>
                                <button class="view-recipe-btn" onclick="showRecipe('${p.n}'); event.stopPropagation();" title="æŸ¥çœ‹åšæ³•">ğŸ“–</button>
                            </div>
                            <div style="font-size: 0.75rem; opacity: 0.7; margin-top: 3px;">
                                ${p.i ? p.i.slice(0, 3).join('ã€') + (p.i.length > 3 ? '...' : '') : ''}
                            </div>
                        </div>
                        <div style="text-align: right;">
                            <small style="color: var(--accent); font-weight: bold;">${p.k} kcal</small>
                            <div style="font-size: 0.7rem; opacity: 0.6; margin-top: 2px; cursor: pointer;" onclick="removeFromPlan(${idx}); event.stopPropagation();" title="åˆ é™¤">
                                ğŸ—‘ï¸
                            </div>
                        </div>
                </li>
            `).join('');
            }

            planCount.textContent = plan.length;
            calTotal.textContent = plan.reduce((a,b) => a+(b.k || 0), 0);
        }

        function removeFromPlan(idx) {
            if(confirm('ç¡®å®šè¦åˆ é™¤è¿™é“èœå—ï¼Ÿ')) {
                plan.splice(idx, 1);
                renderPlan();
                saveData();
                showToast("å·²åˆ é™¤");
            }
        }

        function clearPlan() {
            if(plan.length === 0) return;
            if(confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰è®¡åˆ’å—ï¼Ÿ')) {
                plan = [];
                renderPlan();
                saveData();
                showToast("è®¡åˆ’å·²æ¸…ç©º");
            }
        }

        function selectDate(type, el) {
            selectedDate = type;
            document.querySelectorAll('.date-btn').forEach(btn => btn.classList.remove('active'));
            el.classList.add('active');
            // è¿™é‡Œå¯ä»¥æ ¹æ®æ—¥æœŸç­›é€‰è®¡åˆ’
            showToast(`å·²åˆ‡æ¢åˆ°${el.textContent}`, 1500);
        }

        // æ¸…å•ç”Ÿæˆ
        function genShop() {
            const needed = new Set();
            plan.forEach(p => {
                if(p.i) {
                    p.i.forEach(ing => needed.add(ing));
                }
            });
            inventory.forEach(ing => needed.delete(ing));
            const list = Array.from(needed);
            const shopList = document.getElementById('shopList');
            const shopCount = document.getElementById('shopCount');

            shopCount.textContent = list.length;

            if(list.length === 0) {
                shopList.innerHTML = '<li class="item empty-state" style="justify-content:center; border:none; color:green;"><div>âœ… æ— éœ€é‡‡è´­ï¼Œåº“å­˜å……è¶³ï¼</div></li>';
            } else {
                shopList.innerHTML = list.map((i, idx) => `
                    <li class="item fade-in" style="animation-delay: ${idx * 0.05}s;">
                        <label style="cursor: pointer; display: flex; align-items: center; width: 100%;">
                            <input type="checkbox" style="width: auto; margin-right: 10px;" onchange="updateShopProgress()">
                            <span>${i}</span>
                        </label>
                    </li>
                `).join('');
            }
            showToast(`æ¸…å•å·²åˆ·æ–°ï¼Œå…± ${list.length} é¡¹`);
        }

        function checkAll() {
            const checkboxes = document.querySelectorAll('#shopList input[type="checkbox"]');
            const allChecked = Array.from(checkboxes).every(cb => cb.checked);
            checkboxes.forEach(cb => cb.checked = !allChecked);
            updateShopProgress();
        }

        function updateShopProgress() {
            const checkboxes = document.querySelectorAll('#shopList input[type="checkbox"]');
            const checked = Array.from(checkboxes).filter(cb => cb.checked).length;
            const total = checkboxes.length;
            if(total > 0) {
                showToast(`å·²å®Œæˆ ${checked}/${total} é¡¹`, 1500);
            }
        }

        // ç»Ÿè®¡ä¿¡æ¯
        function updateStats() {
            const statRecipes = document.getElementById('statRecipes');
            const statIngredients = document.getElementById('statIngredients');
            const statDays = document.getElementById('statDays');

            if(statRecipes) statRecipes.textContent = plan.length;
            if(statIngredients) statIngredients.textContent = inventory.length;

            if(statDays && firstUseDate) {
                const days = Math.ceil((new Date() - new Date(firstUseDate)) / (1000 * 60 * 60 * 24));
                statDays.textContent = Math.max(1, days);
            } else if(statDays) {
                statDays.textContent = '1';
            }
        }

        // å¯¼å‡ºæ•°æ®
        function exportData() {
            const data = {
                inventory: inventory,
                plan: plan,
                exportDate: new Date().toISOString(),
                stats: {
                    recipes: plan.length,
                    ingredients: inventory.length,
                    totalCalories: plan.reduce((a,b) => a+(b.k || 0), 0)
                }
            };

            const blob = new Blob([JSON.stringify(data, null, 2)], {type: 'application/json'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `menu-planner-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
            showToast("æ•°æ®å·²å¯¼å‡º");
        }

        // é”®ç›˜ç¿»é¡µå’Œå¿«æ·é”®
        document.addEventListener('keydown', (e) => {
            if(e.key === "ArrowRight" || e.key === "d" || e.key === "D") flipNext();
            if(e.key === "ArrowLeft" || e.key === "a" || e.key === "A") flipPrev();
            if(e.key === "Escape" && currentPage > 0) jumpTo(0);

            // æ•°å­—é”®å¿«é€Ÿè·³è½¬
            if(e.key >= "1" && e.key <= "5") {
                const pageNum = parseInt(e.key) - 1;
                if(pageNum !== currentPage) jumpTo(pageNum);
            }
        });

        // æ˜¾ç¤ºèœå“æ•™å­¦
        function showRecipe(recipeName) {
            const recipe = db.find(r => r.n === recipeName);
            if(!recipe) {
                showToast("æœªæ‰¾åˆ°è¯¥èœå“çš„è¯¦ç»†ä¿¡æ¯");
                return;
            }

            const modal = document.getElementById('recipeModal');
            const details = document.getElementById('recipeDetails');

            // æ„å»ºæ•™å­¦å†…å®¹
            let html = `
                <div class="recipe-header">
                    <h2 class="recipe-title">${recipe.n}</h2>
                    <div class="recipe-meta">
                        <span>ğŸ”¥ ${recipe.k} kcal</span>
                        <span>ğŸ’ª è›‹ç™½è´¨ ${recipe.p}g</span>
                        <span>ğŸš ç¢³æ°´ ${recipe.c}g</span>
                        <span>ğŸ·ï¸ ${getTypeName(recipe.t)}</span>
                    </div>
                </div>
            `;

            // é…æ–™è¡¨
            if(recipe.ingredients && recipe.ingredients.length > 0) {
                html += `
                    <div class="recipe-section">
                        <h3>ğŸ¥˜ æ‰€éœ€é…æ–™</h3>
                        <ul class="ingredients-list">
                            ${recipe.ingredients.map(ing => `
                                <li>
                                    <span>${ing.name}</span>
                                    <span style="color: var(--accent); font-weight: bold;">${ing.amount}</span>
                                </li>
                            `).join('')}
                        </ul>
                    </div>
                `;
            }

            // åˆ¶ä½œæ­¥éª¤
            if(recipe.steps && recipe.steps.length > 0) {
                html += `
                    <div class="recipe-section">
                        <h3>ğŸ‘¨â€ğŸ³ åˆ¶ä½œæ­¥éª¤</h3>
                        <ol class="steps-list">
                            ${recipe.steps.map(step => `
                                <li>${step}</li>
                            `).join('')}
                        </ol>
                    </div>
                `;
            }

            // å°è´´å£«
            if(recipe.tips) {
                html += `
                    <div class="recipe-tips">
                        <strong>ğŸ’¡ å°è´´å£«ï¼š</strong>${recipe.tips}
                    </div>
                `;
            }

            details.innerHTML = html;
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeRecipeModal() {
            const modal = document.getElementById('recipeModal');
            modal.classList.remove('active');
            document.body.style.overflow = '';
        }

        function getTypeName(type) {
            const types = {
                'meat': 'ğŸ¥© è‚‰é£Ÿ',
                'light': 'ğŸ¥¬ è½»é£Ÿ',
                'balanced': 'ğŸ¥— å‡è¡¡',
                'vegan': 'ğŸŒ± ç´ é£Ÿ',
                'quick': 'âš¡ å¿«æ‰‹'
            };
            return types[type] || type;
        }

        // å®šæœŸæ›´æ–°ç»Ÿè®¡
        setInterval(updateStats, 5000);
        updateStats();

    </script>
</body>
</html>
